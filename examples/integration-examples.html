<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Captcha Widget - í†µí•© ì˜ˆì œ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        .example-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: #f9f9f9;
        }
        .example-card h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .captcha-container {
            margin: 20px 0;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ccc;
            border-radius: 8px;
            background: white;
        }
        .controls {
            margin: 15px 0;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 5px;
        }
        .btn:hover {
            background: #5a6fd8;
        }
        .btn.secondary {
            background: #6c757d;
        }
        .btn.success {
            background: #28a745;
        }
        .btn.danger {
            background: #dc3545;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
        .result.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .result.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .framework-examples {
            margin-top: 40px;
        }
        .framework-tab {
            display: inline-block;
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        .framework-tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .framework-content {
            display: none;
            border: 1px solid #dee2e6;
            padding: 20px;
            border-radius: 0 5px 5px 5px;
        }
        .framework-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”’ Real Captcha Widget</h1>
        <p>CDN ê¸°ë°˜ ìº¡ì°¨ ìœ„ì ¯ í†µí•© ì˜ˆì œ ë° ë°ëª¨</p>
        <p><strong>CDN URL:</strong> <code>https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js</code></p>
    </div>

    <div class="example-grid">
        <!-- ê¸°ë³¸ ì˜ˆì œ -->
        <div class="example-card">
            <h3>ğŸš€ ê¸°ë³¸ ì‚¬ìš©ë²•</h3>
            <p>ê°€ì¥ ìŠ¤ë¦½ê¸° ì‰«ìš´ ê¸°ë³¸ ìºíŠ¸ì°¨ êµ¬í˜„</p>
            <div id="captcha-basic" class="captcha-container"></div>
            <div class="controls">
                <button class="btn" onclick="initBasicCaptcha()">ì´ˆê¸°í™”</button>
                <button class="btn secondary" onclick="resetBasicCaptcha()">ë¦¬ì…‹</button>
            </div>
            <div id="result-basic" class="result" style="display: none;"></div>
        </div>

        <!-- ì»¤ìŠ¤í…€ ì˜¨ì…˜ -->
        <div class="example-card">
            <h3>âš™ï¸ ì»¤ìŠ¤í…€ ì˜µì…˜</h3>
            <p>ë‹¤í¬ í…Œë§ˆì™€ ì»¤íŒ©íŠ¸ ì‚¬ì´ì¦ˆ</p>
            <div id="captcha-custom" class="captcha-container"></div>
            <div class="controls">
                <button class="btn" onclick="initCustomCaptcha()">ì´ˆê¸°í™”</button>
                <button class="btn secondary" onclick="resetCustomCaptcha()">ë¦¬ì…‹</button>
            </div>
            <div id="result-custom" class="result" style="display: none;"></div>
        </div>

        <!-- ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ -->
        <div class="example-card">
            <h3>ğŸ”„ ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤</h3>
            <p>í•œ í˜ì´ì§€ì— ì—¬ëŸ¬ ìº¡ì°¨ ì‚¬ìš©</p>
            <div id="captcha-multi1" class="captcha-container"></div>
            <div id="captcha-multi2" class="captcha-container"></div>
            <div class="controls">
                <button class="btn" onclick="initMultiCaptcha()">ì´ˆê¸°í™”</button>
                <button class="btn secondary" onclick="resetMultiCaptcha()">ë¦¬ì…‹</button>
            </div>
            <div id="result-multi" class="result" style="display: none;"></div>
        </div>

        <!-- ë™ì  ë¡œë”© -->
        <div class="example-card">
            <h3>âš¡ ë™ì  ë¡œë”©</h3>
            <p>JavaScriptë¡œ ìºíŠ¸ì°¨ ë™ì  ìƒì„±</p>
            <div id="captcha-dynamic" class="captcha-container">
                <p>ì•„ì§ ìºíŠ¸ì°¨ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="controls">
                <button class="btn" onclick="loadDynamicCaptcha()">ìºíŠ¸ì°¨ ë¡œë“œ</button>
                <button class="btn danger" onclick="unloadDynamicCaptcha()">ì œê±°</button>
            </div>
            <div id="result-dynamic" class="result" style="display: none;"></div>
        </div>

        <!-- í¼ í†µí•© -->
        <div class="example-card">
            <h3>ğŸ“ í¼ í†µí•©</h3>
            <p>ì‹¤ì œ ë¡œê·¸ì¸ í¼ê³¼ ìºíŠ¸ì°¨ ì—°ë™</p>
            <form id="login-form" onsubmit="return handleLogin(event)">
                <input type="email" placeholder="ì´ë©”ì¼" required style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <div id="captcha-form" class="captcha-container"></div>
                <button type="submit" class="btn success" style="width: 100%;">ë¡œê·¸ì¸</button>
            </form>
            <div id="result-form" class="result" style="display: none;"></div>
        </div>

        <!-- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ -->
        <div class="example-card">
            <h3>ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§</h3>
            <p>CDN ë¡œë“œ ì‹œê°„ ë° ì„±ëŠ¥ ì¸¡ì •</p>
            <div class="controls">
                <button class="btn" onclick="startPerformanceTest()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
                <button class="btn secondary" onclick="stopPerformanceTest()">ì¤‘ì§€</button>
            </div>
            <div id="performance-results">
                <p><strong>ë¡œë“œ ì‹œê°„:</strong> <span id="load-time">-</span>ms</p>
                <p><strong>ìºì‹œ ìƒíƒœ:</strong> <span id="cache-status">-</span></p>
                <p><strong>íŒŒì¼ í¬ê¸°:</strong> <span id="file-size">-</span></p>
            </div>
        </div>
    </div>

    <!-- í”„ë ˆì„ì›Œí¬ í†µí•© ì˜ˆì œ -->
    <div class="framework-examples">
        <h2>ğŸŒ í”„ë ˆì„ì›Œí¬ í†µí•© ì˜ˆì œ</h2>
        
        <div class="framework-tabs">
            <div class="framework-tab active" onclick="showFramework('vanilla')">ë°”ë‹ë¼ JS</div>
            <div class="framework-tab" onclick="showFramework('react')">ë¦¬ì•¡íŠ¸</div>
            <div class="framework-tab" onclick="showFramework('vue')">ë·</div>
            <div class="framework-tab" onclick="showFramework('angular')">ì•µê·ˆëŸ¬</div>
            <div class="framework-tab" onclick="showFramework('wordpress')">ì›Œë“œí”„ë ˆìŠ¤</div>
        </div>

        <div id="vanilla" class="framework-content active">
            <h4>ğŸŒ¿ ë°”ë‹ë¼ JavaScript</h4>
            <div class="code-block">
&lt;!-- HTML --&gt;
&lt;script src="https://unpkg.com/react@18/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js"&gt;&lt;/script&gt;

&lt;div id="my-captcha"&gt;&lt;/div&gt;

&lt;script&gt;
// ê¸°ë³¸ ì‚¬ìš©
renderRealCaptcha('my-captcha', {
  theme: 'light',
  size: 'normal'
}, function(result) {
  if (result.success) {
    console.log('ìºíŠ¸ì°¨ ì„±ê³µ:', result.token);
    // ì„œë²„ë¡œ í† í° ì „ì†¡
  }
});
&lt;/script&gt;
            </div>
        </div>

        <div id="react" class="framework-content">
            <h4>âš›ï¸ React ì»´í¬ë„ŒíŠ¸</h4>
            <div class="code-block">
// RealCaptcha.jsx
import { useEffect, useRef } from 'react';

function RealCaptcha({ onComplete, theme = 'light', size = 'normal' }) {
  const captchaRef = useRef(null);
  const instanceRef = useRef(null);

  useEffect(() => {
    if (typeof window !== 'undefined' && window.renderRealCaptcha) {
      instanceRef.current = window.renderRealCaptcha(
        captchaRef.current,
        { theme, size },
        onComplete
      );
    }
    
    return () => {
      if (instanceRef.current) {
        instanceRef.current.destroy();
      }
    };
  }, [onComplete, theme, size]);

  return &lt;div ref={captchaRef} /&gt;;
}

// ì‚¬ìš©ì˜ˆì‹œ
function App() {
  const handleCaptcha = (result) =&gt; {
    console.log('ìºíŠ¸ì°¨ ê²°ê³¼:', result);
  };

  return (
    &lt;RealCaptcha 
      onComplete={handleCaptcha}
      theme="light"
      size="normal"
    /&gt;
  );
}
            </div>
        </div>

        <div id="vue" class="framework-content">
            <h4>ğŸ‘§ Vue.js ì»´í¬ë„ŒíŠ¸</h4>
            <div class="code-block">
// RealCaptcha.vue
&lt;template&gt;
  &lt;div ref="captchaContainer"&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'RealCaptcha',
  props: {
    theme: { type: String, default: 'light' },
    size: { type: String, default: 'normal' }
  },
  mounted() {
    this.initCaptcha();
  },
  beforeUnmount() {
    if (this.captchaInstance) {
      this.captchaInstance.destroy();
    }
  },
  methods: {
    initCaptcha() {
      if (typeof window !== 'undefined' && window.renderRealCaptcha) {
        this.captchaInstance = window.renderRealCaptcha(
          this.$refs.captchaContainer,
          {
            theme: this.theme,
            size: this.size
          },
          this.handleComplete
        );
      }
    },
    handleComplete(result) {
      this.$emit('complete', result);
    },
    reset() {
      if (this.captchaInstance) {
        this.captchaInstance.reset();
      }
    }
  }
};
&lt;/script&gt;
            </div>
        </div>

        <div id="angular" class="framework-content">
            <h4>ğŸ…°ï¸ Angular ì»´í¬ë„ŒíŠ¸</h4>
            <div class="code-block">
// real-captcha.component.ts
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild, AfterViewInit, OnDestroy } from '@angular/core';

declare global {
  interface Window {
    renderRealCaptcha: any;
  }
}

@Component({
  selector: 'app-real-captcha',
  template: `&lt;div #captchaContainer&gt;&lt;/div&gt;`
})
export class RealCaptchaComponent implements AfterViewInit, OnDestroy {
  @ViewChild('captchaContainer', { static: true }) captchaContainer!: ElementRef;
  @Input() theme: string = 'light';
  @Input() size: string = 'normal';
  @Output() complete = new EventEmitter&lt;any&gt;();
  
  private captchaInstance: any;

  ngAfterViewInit() {
    this.initCaptcha();
  }

  ngOnDestroy() {
    if (this.captchaInstance) {
      this.captchaInstance.destroy();
    }
  }

  private initCaptcha() {
    if (typeof window !== 'undefined' && window.renderRealCaptcha) {
      this.captchaInstance = window.renderRealCaptcha(
        this.captchaContainer.nativeElement,
        {
          theme: this.theme,
          size: this.size
        },
        (result: any) =&gt; this.complete.emit(result)
      );
    }
  }

  reset() {
    if (this.captchaInstance) {
      this.captchaInstance.reset();
    }
  }
}
            </div>
        </div>

        <div id="wordpress" class="framework-content">
            <h4>ğŸ“ WordPress í”ŒëŸ¬ê·¸ì¸</h4>
            <div class="code-block">
// functions.php
function realcaptcha_enqueue_scripts() {
    wp_enqueue_script('react', 'https://unpkg.com/react@18/umd/react.production.min.js', array(), '18.0.0', true);
    wp_enqueue_script('react-dom', 'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js', array('react'), '18.0.0', true);
    wp_enqueue_script('realcaptcha', 'https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js', array('react', 'react-dom'), '1.0.0', true);
}
add_action('wp_enqueue_scripts', 'realcaptcha_enqueue_scripts');

// shortcode
function realcaptcha_shortcode($atts) {
    $atts = shortcode_atts(array(
        'theme' =&gt; 'light',
        'size' =&gt; 'normal',
        'id' =&gt; 'captcha-' . uniqid()
    ), $atts);
    
    $output = '&lt;div id="' . esc_attr($atts['id']) . '"&gt;&lt;/div&gt;';
    $output .= '&lt;script&gt;';
    $output .= 'document.addEventListener("DOMContentLoaded", function() {';
    $output .= 'renderRealCaptcha("' . esc_js($atts['id']) . '", {';
    $output .= 'theme: "' . esc_js($atts['theme']) . '",';
    $output .= 'size: "' . esc_js($atts['size']) . '"';
    $output .= '}, function(result) {';
    $output .= 'console.log("WordPress Captcha:", result);';
    $output .= '});';
    $output .= '});';
    $output .= '&lt;/script&gt;';
    
    return $output;
}
add_shortcode('realcaptcha', 'realcaptcha_shortcode');

// ì‚¬ìš©ë²•: [realcaptcha theme="dark" size="compact"]
            </div>
        </div>
    </div>

    <!-- React ë° ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Real Captcha Widget -->
    <script src="https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js"></script>
    
    <!-- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ -->
    <script src="../monitoring/performance-monitor.js"></script>
    
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let captchaInstances = {};
        let performanceMonitor = null;
        
        // ê¸°ë³¸ ì˜ˆì œ
        function initBasicCaptcha() {
            if (captchaInstances.basic) {
                captchaInstances.basic.destroy();
            }
            captchaInstances.basic = renderRealCaptcha('captcha-basic', {
                theme: 'light',
                size: 'normal'
            }, function(result) {
                showResult('result-basic', result, 'ê¸°ë³¸ ìºíŠ¸ì°¨');
            });
        }
        
        function resetBasicCaptcha() {
            if (captchaInstances.basic) {
                captchaInstances.basic.reset();
                hideResult('result-basic');
            }
        }
        
        // ì»¤ìŠ¤í…€ ì˜µì…˜
        function initCustomCaptcha() {
            if (captchaInstances.custom) {
                captchaInstances.custom.destroy();
            }
            captchaInstances.custom = renderRealCaptcha('captcha-custom', {
                theme: 'dark',
                size: 'compact',
                language: 'ko'
            }, function(result) {
                showResult('result-custom', result, 'ì»¤ìŠ¤í…€ ìºíŠ¸ì°¨');
            });
        }
        
        function resetCustomCaptcha() {
            if (captchaInstances.custom) {
                captchaInstances.custom.reset();
                hideResult('result-custom');
            }
        }
        
        // ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤
        function initMultiCaptcha() {
            ['multi1', 'multi2'].forEach(id => {
                if (captchaInstances[id]) {
                    captchaInstances[id].destroy();
                }
                captchaInstances[id] = renderRealCaptcha(`captcha-${id}`, {
                    theme: id === 'multi1' ? 'light' : 'dark',
                    size: 'normal'
                }, function(result) {
                    showResult('result-multi', result, `ë‹¤ì¤‘ ìºíŠ¸ì°¨ ${id}`);
                });
            });
        }
        
        function resetMultiCaptcha() {
            ['multi1', 'multi2'].forEach(id => {
                if (captchaInstances[id]) {
                    captchaInstances[id].reset();
                }
            });
            hideResult('result-multi');
        }
        
        // ë™ì  ë¡œë”©
        function loadDynamicCaptcha() {
            if (captchaInstances.dynamic) {
                captchaInstances.dynamic.destroy();
            }
            captchaInstances.dynamic = renderRealCaptcha('captcha-dynamic', {
                theme: 'light',
                size: 'normal'
            }, function(result) {
                showResult('result-dynamic', result, 'ë™ì  ìºíŠ¸ì°¨');
            });
        }
        
        function unloadDynamicCaptcha() {
            if (captchaInstances.dynamic) {
                captchaInstances.dynamic.destroy();
                captchaInstances.dynamic = null;
                document.getElementById('captcha-dynamic').innerHTML = '<p>ìºíŠ¸ì°¨ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.</p>';
                hideResult('result-dynamic');
            }
        }
        
        // í¼ í†µí•©
        function initFormCaptcha() {
            if (captchaInstances.form) {
                captchaInstances.form.destroy();
            }
            captchaInstances.form = renderRealCaptcha('captcha-form', {
                theme: 'light',
                size: 'normal'
            }, function(result) {
                window.captchaResult = result;
                showResult('result-form', result, 'í¼ ìºíŠ¸ì°¨');
            });
        }
        
        function handleLogin(event) {
            event.preventDefault();
            
            if (!window.captchaResult || !window.captchaResult.success) {
                alert('ìºíŠ¸ì°¨ë¥¼ ë¨¼ì € ì™„ë£Œí•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            // ì‹¤ì œ ë¡œê·¸ì¸ ì²˜ë¦¬
            alert('ë¡œê·¸ì¸ ì„±ê³µ! (ë°ëª¨)');
            return false;
        }
        
        // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
        function startPerformanceTest() {
            if (performanceMonitor) {
                performanceMonitor.stop();
            }
            
            performanceMonitor = new CDNPerformanceMonitor({
                cdnUrls: ['https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js'],
                interval: 5000 // 5ì´ˆë§ˆë‹¤
            });
            
            performanceMonitor.start();
            
            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            const updatePerformance = async () => {
                try {
                    const startTime = performance.now();
                    const response = await fetch('https://cdn.realcaptcha.com/latest/realcaptcha-widget.min.js', {
                        method: 'HEAD',
                        cache: 'no-cache'
                    });
                    const endTime = performance.now();
                    
                    document.getElementById('load-time').textContent = (endTime - startTime).toFixed(2);
                    document.getElementById('cache-status').textContent = response.headers.get('x-cache') || 'ì•Œ ìˆ˜ ì—†ìŒ';
                    document.getElementById('file-size').textContent = formatBytes(response.headers.get('content-length') || 0);
                } catch (error) {
                    console.error('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                }
            };
            
            updatePerformance();
            window.performanceInterval = setInterval(updatePerformance, 5000);
        }
        
        function stopPerformanceTest() {
            if (performanceMonitor) {
                performanceMonitor.stop();
                performanceMonitor = null;
            }
            
            if (window.performanceInterval) {
                clearInterval(window.performanceInterval);
            }
        }
        
        // í—¬í¼ í•¨ìˆ˜
        function showResult(elementId, result, source) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = 'result ' + (result.success ? 'success' : 'error');
            element.innerHTML = `
                <strong>${source} ê²°ê³¼:</strong><br>
                ìƒíƒœ: ${result.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}<br>
                ${result.token ? `í† í°: ${result.token.substring(0, 20)}...` : ''}<br>
                ì‹œê°„: ${new Date().toLocaleTimeString()}
            `;
        }
        
        function hideResult(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }
        
        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function showFramework(framework) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            document.querySelectorAll('.framework-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.framework-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            document.querySelector(`[onclick="showFramework('${framework}')"]`).classList.add('active');
            document.getElementById(framework).classList.add('active');
        }
        
        // ì´ˆê¸° ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            initBasicCaptcha();
            initCustomCaptcha();
            initMultiCaptcha();
            initFormCaptcha();
        });
    </script>
</body>
</html>