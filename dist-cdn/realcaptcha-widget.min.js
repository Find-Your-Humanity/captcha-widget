!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],n):"object"==typeof exports?exports.RealCaptcha=n(require("react"),require("react-dom")):e.RealCaptcha=n(e.React,e.ReactDOM)}(this,(e,n)=>(()=>{"use strict";var t={20:(e,n,t)=>{var r=t(156),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var r,o={},l=null,u=null;for(r in void 0!==t&&(l=""+t),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(u=n.ref),n)a.call(n,r)&&!s.hasOwnProperty(r)&&(o[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===o[r]&&(o[r]=n[r]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:c.current}}n.Fragment=o,n.jsx=l,n.jsxs=l},54:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,"/* 오버레이 스타일 */\n.captcha-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  transition: all 0.3s ease;\n}\n\n.overlay-message {\n  color: white;\n  font-size: 16px;\n  font-weight: 500;\n  margin-top: 16px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n}\n\n/* 오버레이 로딩 스피너 */\n.overlay-loading-spinner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.overlay-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top: 3px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 성공 체크마크 */\n.overlay-success-check {\n  animation: fadeInScale 0.5s ease;\n  position: relative;\n  top: 5px;\n  transform: scale(1.4);\n}\n\n@keyframes fadeInScale {\n  0% { opacity: 0; transform: scale(0.5); }\n  100% { opacity: 1; transform: scale(1.4); }\n}\n\n/* 실패 X 아이콘 */\n.error-x {\n  animation: shake 0.5s ease;\n  transform: scale(1.4);\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-5px); }\n  75% { transform: translateX(5px); }\n}\n\n/* 반응형 디자인 */\n@media (max-width: 480px) {\n  .overlay-message {\n    font-size: 14px;\n    margin-top: 12px;\n  }\n  \n  .overlay-spinner {\n    width: 28px;\n    height: 28px;\n    border-width: 2.5px;\n  }\n  \n  .overlay-success-check,\n  .error-x {\n    transform: scale(1.2);\n  }\n  \n  @keyframes fadeInScale {\n    0% { opacity: 0; transform: scale(0.5); }\n    100% { opacity: 1; transform: scale(1.2); }\n  }\n}\n\n@media (max-width: 360px) {\n  .overlay-message {\n    font-size: 12px;\n    margin-top: 10px;\n  }\n  \n  .overlay-spinner {\n    width: 24px;\n    height: 24px;\n    border-width: 2px;\n  }\n  \n  .overlay-success-check,\n  .error-x {\n    transform: scale(1.1);\n  }\n  \n  @keyframes fadeInScale {\n    0% { opacity: 0; transform: scale(0.5); }\n    100% { opacity: 1; transform: scale(1.1); }\n  }\n} ",""]);const c=a},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},a=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],u=o[l]||0,d="".concat(l," ").concat(u);o[l]=u+1;var p=t(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var f=i(h,r);r.byIndex=c,n.splice(c,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function i(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var c=t(o[a]);n[c].references--}for(var s=r(e,i),l=0;l<o.length;l++){var u=t(o[l]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}o=s}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},132:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,".captcha-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.captcha-button {\n  display: flex;\n  align-items: center;\n  width: 320px;\n  height: 60px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  padding: 0 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.captcha-button:hover {\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.captcha-left {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-right: 12px;\n}\n\n.checkbox {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ccc;\n  border-radius: 2px;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox.error {\n  border-color: #f44336;\n}\n\n.checkbox-inner {\n  width: 12px;\n  height: 12px;\n  background-color: transparent;\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n\n.checkbox-inner.error {\n  background-color: transparent;\n}\n\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #e0e0e0;\n  border-top: 2px solid #4285f4;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 10px;\n  color: #4285f4;\n  font-weight: 500;\n}\n\n.success-check {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.captcha-center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.captcha-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n}\n\n.captcha-right {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-left: 12px;\n}\n\n.refresh-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.refresh-button:hover {\n  background-color: #f5f5f5;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 12px;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 4px;\n}\n\n/* 상태별 스타일 */\n.captcha-button.loading {\n  background-color: #f8f9fa;\n}\n\n.captcha-button.success {\n  background-color: #f1f8e9;\n  border-color: #4caf50;\n}\n\n.captcha-button.error {\n  background-color: #ffebee;\n  border-color: #f44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .captcha-button {\n    max-width: 320px;\n    width: 100%;\n    min-width: 260px;\n    height: auto;\n    min-height: 55px;\n    aspect-ratio: 5.33;\n    padding: 0 12px;\n  }\n  \n  .captcha-text {\n    font-size: 13px;\n  }\n}\n\n@media (max-width: 480px) {\n  .captcha-button {\n    min-width: 240px;\n    min-height: 50px;\n    padding: 0 10px;\n  }\n  \n  .captcha-text {\n    font-size: 12px;\n  }\n  \n  .captcha-left,\n  .captcha-right {\n    width: 36px;\n    height: 36px;\n    margin-right: 8px;\n    margin-left: 8px;\n  }\n}\n\n@media (max-width: 360px) {\n  .captcha-button {\n    min-width: 220px;\n    min-height: 48px;\n  }\n  \n  .captcha-text {\n    font-size: 11px;\n  }\n} ",""]);const c=a},156:n=>{n.exports=e},299:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,".image-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-stage {\n  position: relative;\n  width: 100%;\n  /* 정사각 타일 그리드를 위해 비율을 1:1로 고정. 필요 시 natural ratio로 변경 가능 */\n  aspect-ratio: 1;\n  background-color: #e0e0e0;\n}\n\n.base-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n\n.overlay-grid {\n  position: absolute;\n  inset: 0;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n  gap: 0;\n  pointer-events: none; /* 셀에서 다시 활성화 */\n}\n\n.overlay-cell {\n  position: relative;\n  pointer-events: auto;\n  background-clip: padding-box;\n}\n\n/* 시각적 그리드 라인 */\n.overlay-grid {\n  outline: 2.5px solid #e0e0e0;\n}\n.overlay-cell {\n  box-shadow: inset 0 0 0 1.25px #e0e0e0;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.overlay-cell.selected {\n  background-color: rgba(33, 150, 243, 0.4);\n}\n\n.image-placeholder { display: none; }\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.image-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.image-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.image-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.image-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .image-captcha {\n    max-width: 400px;\n    width: 100%;\n    min-width: 300px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n}\n\n@media (max-width: 480px) {\n  .image-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .image-captcha {\n    min-width: 260px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),n.push(u))}},n}},318:e=>{e.exports=n},338:(e,n,t)=>{var r=t(318);n.H=r.createRoot,r.hydrateRoot},386:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,".warm-feeling-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: rgba(33, 150, 243, 0.4);\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.placeholder-content {\n  font-size: 24px;\n  color: #666;\n}\n\n.image-placeholder img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.warm-feeling-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.warm-feeling-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.warm-feeling-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.warm-feeling-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .warm-feeling-captcha {\n    max-width: 400px;\n    width: 100%;\n    min-width: 300px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n  \n  .image-grid {\n    gap: 2px;\n    padding: 2px;\n  }\n}\n\n@media (max-width: 480px) {\n  .warm-feeling-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .warm-feeling-captcha {\n    min-width: 260px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},569:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,".handwriting-captcha {\n  width: 500px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.images-container {\n  display: flex;\n  gap: 8px;\n  padding: 16px;\n  background-color: #ffffff;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.image-slot {\n  flex: 1;\n  aspect-ratio: 1;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-slot img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.handwriting-area {\n  padding: 16px;\n  background-color: #ffffff;\n}\n\n.grid-pattern {\n  width: 100%;\n  height: 200px;\n  background-image: \n    linear-gradient(rgba(200, 200, 200, 0.3) 1px, transparent 1px),\n    linear-gradient(90deg, rgba(200, 200, 200, 0.3) 1px, transparent 1px);\n  background-size: 20px 20px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  position: relative;\n}\n\n.drawing-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  background-color: transparent;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.control-button.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.control-button.disabled:hover {\n  background-color: transparent;\n}\n\n.verify-button {\n  background-color: #4285f4;\n  color: #ffffff;\n  border: 1px solid #4285f4;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.handwriting-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.handwriting-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.handwriting-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.handwriting-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .handwriting-captcha {\n    max-width: 500px;\n    width: 100%;\n    min-width: 380px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n  \n  .handwriting-area {\n    padding: 14px;\n  }\n  \n  .grid-pattern {\n    height: 180px;\n  }\n}\n\n@media (max-width: 480px) {\n  .handwriting-captcha {\n    min-width: 320px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .handwriting-area {\n    padding: 12px;\n  }\n  \n  .grid-pattern {\n    height: 160px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .handwriting-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .handwriting-area {\n    padding: 10px;\n  }\n  \n  .grid-pattern {\n    height: 140px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},848:(e,n,t)=>{e.exports=t(20)}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={id:e,exports:{}};return t[e](o,o.exports,i),o.exports}i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;var o={};i.r(o),i.d(o,{RealCaptcha:()=>ge,default:()=>me});var a=i(156),c=i.n(a),s=i(338),l=i(848),u=i(72),d=i.n(u),p=i(825),h=i.n(p),f=i(659),g=i.n(f),m=i(56),v=i.n(m),x=i(540),y=i.n(x),w=i(113),b=i.n(w),k=i(132),S={};S.styleTagTransform=b(),S.setAttributes=v(),S.insert=g().bind(null,"head"),S.domAPI=h(),S.insertStyleElement=y();d()(k.A,S);k.A&&k.A.locals&&k.A.locals;var T=i(299),_={};_.styleTagTransform=b(),_.setAttributes=v(),_.insert=g().bind(null,"head"),_.domAPI=h(),_.insertStyleElement=y();d()(T.A,_);T.A&&T.A.locals&&T.A.locals;var j=[],E={captcha:0,image:0,abstractFeeling:0,handwriting:0};function C(e){j.push(e),function(){try{var e=parseInt(localStorage.getItem("current_sequence")||"0")+1,n="behavior_data_".concat(e);localStorage.setItem(n,JSON.stringify(j)),localStorage.setItem("current_sequence",e.toString()),j=[]}catch(e){}}()}const P=function(){function e(){this.isTracking=!1,this.lastMousePosition=null,this.metrics={sessionId:"image_".concat(Date.now()),startTime:Date.now(),endTime:0,totalTime:0,imageInteractions:{},selectionOrder:[],deselectionOrder:[],finalSelection:[],mouseTrajectory:[],refreshCount:0,verifyAttempts:0,verificationSuccess:!1,attemptDuration:0};for(var e=0;e<9;e++)this.metrics.imageInteractions[e]={imageId:e,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage()},e.prototype.trackMouseMove=function(e,n){var t;if(this.isTracking){var r=Date.now(),i=null===(t=document.querySelector(".image-captcha"))||void 0===t?void 0:t.getBoundingClientRect();if(i){var o=i.width/2,a=i.height/2,c=Math.sqrt(Math.pow(e-o,2)+Math.pow(n-a,2)),s={x:e/i.width,y:n/i.height,distanceFromCenter:c,timestamp:r};this.metrics.mouseTrajectory.push(s),this.lastMousePosition=s}}},e.prototype.trackImageClick=function(e,n){if(this.isTracking){var t=this.metrics.imageInteractions[e];if(t){var r=n.target.getBoundingClientRect(),i=(n.clientX-r.left)/r.width,o=(n.clientY-r.top)/r.height,a={x:i,y:o,distanceFromCenter:Math.sqrt(Math.pow(i-.5,2)+Math.pow(o-.5,2)),timestamp:Date.now()};t.clicks.push(a),t.interactionDensity.clickCount++,this.updateInteractionDensity(t)}}},e.prototype.trackImageHover=function(e,n){if(this.isTracking){var t=this.metrics.imageInteractions[e];if(t){var r=Date.now();if(n)t.hovers.push({enter:r,leave:0}),t.interactionDensity.hoverCount++;else{var i=t.hovers[t.hovers.length-1];if(i&&0===i.leave){i.leave=r;var o=r-i.enter;t.totalHoverTime+=o,t.interactionDensity.totalHoverTime+=o}}this.updateInteractionDensity(t)}}},e.prototype.trackRefresh=function(){this.isTracking&&this.metrics.refreshCount++},e.prototype.trackVerifyAttempt=function(e){this.isTracking&&(this.metrics.verifyAttempts++,this.metrics.verificationSuccess=e,this.metrics.attemptDuration=Date.now()-this.metrics.startTime,this.metrics.finalSelection=Object.entries(this.metrics.imageInteractions).filter(function(e){e[0];return e[1].isSelected}).map(function(e){var n=e[0];return parseInt(n)}),this.saveToLocalStorage())},e.prototype.trackImageSelection=function(e,n){this.isTracking&&(this.metrics.imageInteractions[e]||(this.metrics.imageInteractions[e]={imageId:e,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}),n?(this.metrics.selectionOrder.push(e),this.metrics.imageInteractions[e].isSelected=!0):(this.metrics.deselectionOrder.push(e),this.metrics.imageInteractions[e].isSelected=!1))},e.prototype.updateInteractionDensity=function(e){var n=Date.now()-this.metrics.startTime;e.interactionDensity.averageDwellTime=e.interactionDensity.totalHoverTime/e.interactionDensity.hoverCount||0,e.interactionDensity.density=(e.interactionDensity.clickCount+e.interactionDensity.hoverCount)/(n||1)},e.prototype.saveToLocalStorage=function(){try{C(this.metrics)}catch(e){}},e.prototype.downloadMetrics=function(e){var n=JSON.stringify(this.metrics,null,2),t=new Blob([n],{type:"application/json"}),r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=e||"image_behavior_".concat(this.metrics.sessionId,".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)},e}();var I=i(54),A={};A.styleTagTransform=b(),A.setAttributes=v(),A.insert=g().bind(null,"head"),A.domAPI=h(),A.insertStyleElement=y();d()(I.A,A);I.A&&I.A.locals&&I.A.locals;var N=function(){return N=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},N.apply(this,arguments)};const D=function(e){var n=e.state,t=e.message;return(0,l.jsxs)("div",N({className:"captcha-overlay"},{children:[function(){switch(n){case"loading":return(0,l.jsx)("div",N({className:"overlay-loading-spinner"},{children:(0,l.jsx)("div",{className:"overlay-spinner"})}));case"success":return(0,l.jsx)("div",N({className:"overlay-success-check"},{children:(0,l.jsx)("svg",N({width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))}));case"error":return(0,l.jsx)("div",N({className:"error-x"},{children:(0,l.jsx)("svg",N({width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",fill:"#F44336"})}))}));default:return null}}(),("success"===n||"error"===n)&&(0,l.jsx)("div",N({className:"overlay-message"},{children:function(){if(t)return t;switch(n){case"loading":return"검증 중...";case"success":return"Success!";case"error":return"Failed";default:return""}}()}))]}))};var R=function(){return R=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},R.apply(this,arguments)},M=function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,c)}s((r=r.apply(e,n||[])).next())})},L=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},O=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};const z=function(e){e.onSuccess,e.siteKey,e.apiEndpoint,e.captchaToken;var n=(0,a.useState)([]),t=n[0],r=n[1],i=(0,a.useState)(!1),o=i[0],c=i[1],s=(0,a.useState)("idle"),u=s[0],d=s[1],p=(0,a.useState)(""),h=p[0],f=(p[1],(0,a.useState)(parseInt({NODE_ENV:"production",REACT_APP_TEST_MODE:"false",REACT_APP_API_BASE_URL:"https://api.realcatcha.com",REACT_APP_CDN_BASE_URL:"https://1df60f5faf3b4f2f992ced2edbae22ad.kakaoiedge.com",REACT_APP_SUCCESS_REDIRECT_URL:""}.REACT_APP_CAPTCHA_TTL||"60"))),g=f[0],m=f[1],v=(0,a.useState)(""),x=v[0],y=v[1],w=(0,a.useState)(!1),b=(w[0],w[1]),k=(0,a.useState)(""),S=k[0],T=k[1],_=(0,a.useState)(""),j=_[0],E=_[1],C=(0,a.useRef)(new P),I=(0,a.useRef)(!1);(0,a.useEffect)(function(){return C.current.startTracking(),A(),function(){C.current.stopTracking()}},[]);var A=function(){return M(void 0,void 0,void 0,function(){var e,n;return L(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),b(!0),[4,fetch("".concat("https://api.realcatcha.com","/api/image-challenge"),{method:"POST"})];case 1:if(!(e=t.sent()).ok)throw new Error("HTTP ".concat(e.status));return[4,e.json()];case 2:return n=t.sent(),T(n.challenge_id||""),y(n.url||""),"number"==typeof n.ttl&&n.ttl>0&&m(n.ttl),E(n.question||""),r([]),c(!1),[3,5];case 3:return t.sent(),[3,5];case 4:return b(!1),[7];case 5:return[2]}})})};(0,a.useEffect)(function(){if(!(g<=0)){var e=setInterval(function(){return m(function(e){return e>0?e-1:0})},1e3);return function(){return clearInterval(e)}}},[g]),(0,a.useEffect)(function(){if(0!==g||o)g>0&&(I.current=!1);else{if(I.current)return;I.current=!0,N()}},[g,o]);var N=function(){r([]),c(!1),C.current.trackRefresh(),A()};return(0,l.jsxs)("div",R({className:"image-captcha ".concat(u),onMouseMove:function(e){var n=e.currentTarget.getBoundingClientRect(),t=e.clientX-n.left,r=e.clientY-n.top;C.current.trackMouseMove(t,r)}},{children:[("loading"===u||"success"===u||"error"===u)&&(0,l.jsx)(D,{state:u,message:h}),(0,l.jsx)("div",R({className:"captcha-header"},{children:(0,l.jsx)("span",R({className:"header-text"},{children:j||"Select all matching images."}))})),(0,l.jsxs)("div",R({className:"image-stage"},{children:[x&&(0,l.jsx)("img",{className:"base-image",src:x,alt:"captcha",draggable:!1}),(0,l.jsx)("div",R({className:"overlay-grid"},{children:[{id:1,selected:!1,gridPosition:{row:1,col:1}},{id:2,selected:!1,gridPosition:{row:1,col:2}},{id:3,selected:!1,gridPosition:{row:1,col:3}},{id:4,selected:!1,gridPosition:{row:2,col:1}},{id:5,selected:!1,gridPosition:{row:2,col:2}},{id:6,selected:!1,gridPosition:{row:2,col:3}},{id:7,selected:!1,gridPosition:{row:3,col:1}},{id:8,selected:!1,gridPosition:{row:3,col:2}},{id:9,selected:!1,gridPosition:{row:3,col:3}}].map(function(e){return(0,l.jsx)("div",R({className:"overlay-cell ".concat(t.includes(e.id)?"selected":""),onClick:function(n){return i=e.id,o=n.nativeEvent,a=t.includes(i),r(function(e){return a?e.filter(function(e){return e!==i}):O(O([],e,!0),[i],!1)}),void C.current.trackImageClick(i,o);var i,o,a},onMouseEnter:function(){return C.current.trackImageHover(e.id,!0)},onMouseLeave:function(){return C.current.trackImageHover(e.id,!1)}},{children:t.includes(e.id)&&(0,l.jsx)("div",R({className:"selection-overlay"},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))}),e.id)})}))]})),(0,l.jsxs)("div",R({className:"captcha-controls"},{children:[(0,l.jsx)("div",R({className:"control-left"},{children:(0,l.jsx)("button",R({className:"control-button",onClick:N},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))})),(0,l.jsx)("button",R({className:"verify-button ".concat(t.length>0&&S?"active":""),onClick:function(){return M(void 0,void 0,void 0,function(){var e,n,i;return L(this,function(o){switch(o.label){case 0:if(!S)return[2];d("loading"),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("".concat("https://api.realcatcha.com","/api/imagecaptcha-verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge_id:S,selections:t,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2"})})];case 2:if(!(e=o.sent()).ok)throw new Error("HTTP ".concat(e.status));return[4,e.json()];case 3:return n=o.sent(),i=!!n.success,C.current.trackVerifyAttempt(i),i?(d("success"),c(!0)):(d("error"),setTimeout(function(){d("idle"),r([]),N()},1e3)),[3,5];case 4:return o.sent(),d("error"),setTimeout(function(){d("idle")},1e3),[3,5];case 5:return[2]}})})},disabled:!(0!==t.length&&S)},{children:"VERIFY"}))]}))]}))};var H=i(386),F={};F.styleTagTransform=b(),F.setAttributes=v(),F.insert=g().bind(null,"head"),F.domAPI=h(),F.insertStyleElement=y();d()(H.A,F);H.A&&H.A.locals&&H.A.locals;var q=function(){return q=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},q.apply(this,arguments)},K=function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,c)}s((r=r.apply(e,n||[])).next())})},U=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},B=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};const V=function(e){var n=e.onSuccess,t=(e.siteKey,e.apiEndpoint,e.captchaToken,(0,a.useState)([])),r=t[0],i=t[1],o=(0,a.useState)(!1),c=o[0],s=o[1],u=(0,a.useState)("idle"),d=u[0],p=u[1],h=(0,a.useState)(""),f=h[0],g=(h[1],(0,a.useState)(!1)),m=g[0],v=g[1],x=(0,a.useState)(""),y=x[0],w=x[1],b=(0,a.useState)(""),k=b[0],S=b[1],T=(0,a.useState)(""),_=T[0],j=T[1],E=(0,a.useState)(0),C=E[0],I=E[1],A=(0,a.useState)([]),N=A[0],R=A[1],M=(0,a.useRef)(new P),L=(0,a.useRef)(!1),O=!1,z="https://api.realcatcha.com";(0,a.useEffect)(function(){return M.current.startTracking(),H(),function(){M.current.stopTracking()}},[]),(0,a.useEffect)(function(){if(!(C<=0)){var e=setInterval(function(){return I(function(e){return e>0?e-1:0})},1e3);return function(){return clearInterval(e)}}},[C]),(0,a.useEffect)(function(){if(0!==C||c||m)C>0&&(L.current=!1);else{if(L.current)return;L.current=!0,w("시간이 만료되어 새로운 문제로 갱신합니다."),F()}},[C,c,m]);var H=function(){return K(void 0,void 0,void 0,function(){var e,n,t,r;return U(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),v(!0),w(""),i([]),s(!1),[4,fetch("".concat(z,"/api/abstract-captcha"),{method:"POST"})];case 1:if(!(e=o.sent()).ok)throw new Error("HTTP ".concat(e.status));return[4,e.json()];case 2:return n=o.sent(),S(n.challenge_id),j(n.question||"이미지를 선택하세요"),I(n.ttl||45),t=n.images||[],r=t.map(function(e){return{id:e.id,url:e.url.startsWith("http")?e.url:"".concat(z).concat(e.url)}}),R(r),[3,5];case 3:return o.sent(),w("문제를 불러오지 못했습니다. 다시 시도해주세요."),[3,5];case 4:return v(!1),[7];case 5:return[2]}})})},F=function(){i([]),s(!1),M.current.trackRefresh(),H()};return(0,l.jsxs)("div",q({className:"warm-feeling-captcha ".concat(d),onMouseMove:function(e){var n=e.currentTarget.getBoundingClientRect(),t=e.clientX-n.left,r=e.clientY-n.top;M.current.trackMouseMove(t,r)}},{children:[("loading"===d||"success"===d||"error"===d)&&(0,l.jsx)(D,{state:d,message:f}),(0,l.jsx)("div",q({className:"captcha-header"},{children:(0,l.jsx)("span",q({className:"header-text"},{children:_}))})),y&&(0,l.jsx)("div",q({style:{padding:8,color:"#c00",fontSize:12,textAlign:"center"}},{children:y})),(0,l.jsx)("div",q({className:"image-grid"},{children:N.map(function(e){return(0,l.jsxs)("div",q({className:"image-item ".concat(r.includes(e.id)?"selected":""),onClick:function(){return n=e.id,t=r.includes(n),i(function(e){return t?e.filter(function(e){return e!==n}):B(B([],e,!0),[n],!1)}),void M.current.trackImageSelection(n,!t);var n,t},onMouseEnter:function(){return M.current.trackImageHover(e.id,!0)},onMouseLeave:function(){return M.current.trackImageHover(e.id,!1)}},{children:[(0,l.jsx)("div",q({className:"image-placeholder"},{children:(0,l.jsx)("img",{src:e.url,alt:"Image ".concat(e.id)})})),r.includes(e.id)&&(0,l.jsx)("div",q({className:"selection-overlay"},{children:(0,l.jsx)("svg",q({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))]}),e.id)})})),(0,l.jsxs)("div",q({className:"captcha-controls"},{children:[(0,l.jsx)("div",q({className:"control-left"},{children:(0,l.jsx)("button",q({className:"control-button",onClick:F,disabled:m},{children:(0,l.jsx)("svg",q({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))})),(0,l.jsx)("button",q({className:"verify-button ".concat(r.length>0?"active":""),onClick:function(){return K(void 0,void 0,void 0,function(){var e,t,o,a;return U(this,function(c){switch(c.label){case 0:if(!k)return[2];O,p("loading"),c.label=1;case 1:return c.trys.push([1,4,5,6]),v(!0),e={challenge_id:k,selections:r,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2"},[4,fetch("".concat(z,"/api/abstract-verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 2:if(!(t=c.sent()).ok)throw new Error("HTTP ".concat(t.status));return[4,t.json()];case 3:return o=c.sent(),a=!!o.success,M.current.trackVerifyAttempt(a),a?(p("success"),s(!0),null==n||n(),[2]):(p("error"),setTimeout(function(){i([]),H(),p("idle")},1e3),[3,6]);case 4:return c.sent(),p("error"),setTimeout(function(){p("idle")},1e3),[3,6];case 5:return v(!1),[7];case 6:return[2]}})})},disabled:0===r.length||m},{children:"VERIFY"}))]}))]}))};var X=i(569),J={};J.styleTagTransform=b(),J.setAttributes=v(),J.insert=g().bind(null,"head"),J.domAPI=h(),J.insertStyleElement=y();d()(X.A,J);X.A&&X.A.locals&&X.A.locals;const Y=function(){function e(){this.isTracking=!1,this.currentStroke=[],this.lastStrokeEnd=0,this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking&&(this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage())},e.prototype.startStroke=function(e,n){if(this.isTracking){var t=Date.now(),r={x:e,y:n,timestamp:t};this.currentStroke=[r],this.lastStrokeEnd>0&&this.metrics.strokeIntervals.push(t-this.lastStrokeEnd)}},e.prototype.addPoint=function(e,n){if(this.isTracking&&0!==this.currentStroke.length){var t={x:e,y:n,timestamp:Date.now()};this.currentStroke.push(t),this.updateMetrics()}},e.prototype.endStroke=function(){if(this.isTracking&&!(this.currentStroke.length<2)){this.metrics.strokeCount++,this.lastStrokeEnd=Date.now();var e=this.calculateStrokeLength(),n=this.currentStroke[this.currentStroke.length-1].timestamp-this.currentStroke[0].timestamp,t=this.calculateCurvature(),r=this.calculateJitter(),i=this.calculateDirectionChanges(),o=this.calculateHesitations();this.metrics.strokeLengths.push(e),this.metrics.strokeDurations.push(n),this.metrics.strokeCurvatures.push(t),this.metrics.strokeJitters.push(r),this.metrics.directionChanges.push(i),this.metrics.hesitationPoints.push(o);var a=e/n;this.metrics.speedVariations.push(a),this.updateAverages(),this.currentStroke=[]}},e.prototype.calculateStrokeLength=function(){for(var e=0,n=1;n<this.currentStroke.length;n++){var t=this.currentStroke[n].x-this.currentStroke[n-1].x,r=this.currentStroke[n].y-this.currentStroke[n-1].y;e+=Math.sqrt(t*t+r*r)}return e},e.prototype.calculateCurvature=function(){if(this.currentStroke.length<3)return 0;for(var e=0,n=1;n<this.currentStroke.length-1;n++){var t=this.currentStroke[n-1],r=this.currentStroke[n],i=this.currentStroke[n+1],o=Math.atan2(r.y-t.y,r.x-t.x),a=Math.atan2(i.y-r.y,i.x-r.x);e+=Math.abs(a-o)}return e/(this.currentStroke.length-2)},e.prototype.calculateJitter=function(){if(this.currentStroke.length<3)return 0;for(var e=0,n=1;n<this.currentStroke.length-1;n++){var t={x:(this.currentStroke[n-1].x+this.currentStroke[n+1].x)/2,y:(this.currentStroke[n-1].y+this.currentStroke[n+1].y)/2},r=this.currentStroke[n];e+=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return e/(this.currentStroke.length-2)},e.prototype.calculateDirectionChanges=function(){if(this.currentStroke.length<3)return 0;for(var e=0,n=Math.atan2(this.currentStroke[1].y-this.currentStroke[0].y,this.currentStroke[1].x-this.currentStroke[0].x),t=2;t<this.currentStroke.length;t++){var r=Math.atan2(this.currentStroke[t].y-this.currentStroke[t-1].y,this.currentStroke[t].x-this.currentStroke[t-1].x);Math.abs(r-n)>Math.PI/4&&e++,n=r}return e},e.prototype.calculateHesitations=function(){if(this.currentStroke.length<2)return 0;for(var e=0,n=1;n<this.currentStroke.length;n++){var t=this.currentStroke[n].timestamp-this.currentStroke[n-1].timestamp,r=this.currentStroke[n].x-this.currentStroke[n-1].x,i=this.currentStroke[n].y-this.currentStroke[n-1].y;Math.sqrt(r*r+i*i)/t<.1&&e++}return e},e.prototype.updateAverages=function(){var e=this.metrics.strokeLengths.reduce(function(e,n){return e+n},0),n=this.metrics.strokeDurations.reduce(function(e,n){return e+n},0);this.metrics.averageSpeed=e/n},e.prototype.updateMetrics=function(){if(this.currentStroke.length>=2){var e=this.currentStroke[this.currentStroke.length-1],n=this.currentStroke[this.currentStroke.length-2],t=e.timestamp-n.timestamp,r=e.x-n.x,i=e.y-n.y,o=Math.sqrt(r*r+i*i)/t;this.metrics.speedVariations.push(o)}},e.prototype.setVerificationResult=function(e){this.metrics.verificationSuccess=e,this.saveToLocalStorage()},e.prototype.saveToLocalStorage=function(){try{var e="handwriting_behavior_".concat(this.metrics.sessionId);localStorage.setItem(e,JSON.stringify(this.metrics))}catch(e){}},e.prototype.downloadMetrics=function(){var e=JSON.stringify(this.metrics,null,2),n=new Blob([e],{type:"application/json"}),t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="handwriting_behavior_".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},e.prototype.reset=function(){this.currentStroke=[],this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1},this.lastStrokeEnd=0,this.isTracking=!0},e}();var G=function(){return G=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},G.apply(this,arguments)},W=function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,c)}s((r=r.apply(e,n||[])).next())})},$=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},Q=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};const Z=function(e){e.onSuccess;var n=e.samples,t=(e.siteKey,e.apiEndpoint,e.captchaToken,(0,a.useState)(!1)),r=t[0],i=t[1],o=(0,a.useState)(""),c=(o[0],o[1],(0,a.useState)("")),s=(c[0],c[1]),u=(0,a.useState)(!1),d=u[0],p=u[1],h=(0,a.useState)([]),f=h[0],g=h[1],m=(0,a.useState)([]),v=m[0],x=m[1],y=(0,a.useRef)(null),w=(0,a.useRef)(null),b=(0,a.useRef)(new Y),k=(0,a.useState)("idle"),S=k[0],T=k[1],_=(0,a.useState)(""),j=_[0],E=(_[1],(0,a.useState)(parseInt({NODE_ENV:"production",REACT_APP_TEST_MODE:"false",REACT_APP_API_BASE_URL:"https://api.realcatcha.com",REACT_APP_CDN_BASE_URL:"https://1df60f5faf3b4f2f992ced2edbae22ad.kakaoiedge.com",REACT_APP_SUCCESS_REDIRECT_URL:""}.REACT_APP_CAPTCHA_TTL||"60"))),C=E[0],P=E[1],I=(0,a.useRef)(!1),A=(0,a.useState)(null),N=A[0],R=A[1];(0,a.useEffect)(function(){var e=(n||[]).slice(0,5).map(function(e,n){return{id:n+1,src:e,alt:"Sample ".concat(n+1)}});x(e)},[n]),(0,a.useEffect)(function(){var e=y.current;if(e){e.width=2*e.offsetWidth,e.height=2*e.offsetHeight,e.style.width="".concat(e.offsetWidth,"px"),e.style.height="".concat(e.offsetHeight,"px");var n=e.getContext("2d");if(n)return n.scale(2,2),n.lineCap="round",n.strokeStyle="#000000",n.lineWidth=2,w.current=n,b.current.startTracking(),function(){b.current.stopTracking()}}},[]);var M=function(){return W(void 0,void 0,void 0,function(){var e,n,t;return $(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,4,5]),p(!0),[4,fetch("".concat("https://api.realcatcha.com","/api/handwriting-challenge"),{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"rc_live_f49a055d62283fd02e8203ccaba70fc2"}})];case 1:if(!(e=r.sent()).ok)throw new Error("HTTP ".concat(e.status));return[4,e.json()];case 2:return n=r.sent(),t=(n.samples||[]).slice(0,5).map(function(e,n){return{id:n+1,src:e,alt:"Sample ".concat(n+1)}}),x(t),"number"==typeof n.ttl&&n.ttl>0&&P(n.ttl),R(n.challenge_id||null),[3,5];case 3:return r.sent(),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})};(0,a.useEffect)(function(){if(!(C<=0)){var e=setInterval(function(){return P(function(e){return e>0?e-1:0})},1e3);return function(){return clearInterval(e)}}},[C]),(0,a.useEffect)(function(){if(0===C){if(I.current)return;I.current=!0,O(),M()}else C>0&&(I.current=!1)},[C]),(0,a.useEffect)(function(){M()},[]);var L=function(){var e;i(!1),null===(e=w.current)||void 0===e||e.closePath(),b.current.endStroke()},O=function(){var e=y.current;if(e){var n=e.getContext("2d");n&&(n.clearRect(0,0,e.width,e.height),g([]),b.current.reset())}};return(0,l.jsxs)("div",G({className:"handwriting-captcha ".concat(S)},{children:[("loading"===S||"success"===S||"error"===S)&&(0,l.jsx)(D,{state:S,message:j}),(0,l.jsx)("div",G({className:"captcha-header"},{children:(0,l.jsx)("span",G({className:"header-text"},{children:"이미지를 보고 떠오르는 키워드를 손글씨로 작성하세요."}))})),(0,l.jsx)("div",G({className:"images-container"},{children:v.map(function(e){return(0,l.jsx)("div",G({className:"image-slot"},{children:(0,l.jsx)("img",{src:e.src,alt:e.alt})}),e.id)})})),(0,l.jsx)("div",G({className:"handwriting-area"},{children:(0,l.jsx)("div",G({className:"grid-pattern"},{children:(0,l.jsx)("canvas",{ref:y,className:"drawing-canvas",onMouseDown:function(e){var n,t;i(!0);var r=e.nativeEvent,o=r.offsetX,a=r.offsetY;null===(n=w.current)||void 0===n||n.beginPath(),null===(t=w.current)||void 0===t||t.moveTo(o,a),b.current.startStroke(o,a);var c=y.current;if(c&&w.current){var s=w.current.getImageData(0,0,c.width,c.height);g(function(e){return Q(Q([],e,!0),[s],!1)})}},onMouseMove:function(e){var n,t;if(r){var i=e.nativeEvent,o=i.offsetX,a=i.offsetY;null===(n=w.current)||void 0===n||n.lineTo(o,a),null===(t=w.current)||void 0===t||t.stroke(),b.current.addPoint(o,a)}},onMouseUp:L,onMouseLeave:L})}))})),(0,l.jsxs)("div",G({className:"captcha-controls"},{children:[(0,l.jsxs)("div",G({className:"control-left"},{children:[(0,l.jsx)("button",G({className:"control-button",onClick:function(){O(),s(""),M()},disabled:d},{children:(0,l.jsx)("svg",G({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",G({className:"control-button ".concat(0===f.length?"disabled":""),onClick:function(){if(0!==f.length){var e=y.current;if(e&&w.current){var n=f.slice(0,-1);if(g(n),w.current.clearRect(0,0,e.width,e.height),n.length>0){var t=n[n.length-1];w.current.putImageData(t,0,0)}}}},disabled:0===f.length},{children:(0,l.jsx)("svg",G({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",fill:0===f.length?"#ccc":"#666"})}))}))]})),(0,l.jsx)("button",G({className:"verify-button ".concat(f.length>0?"active":""),onClick:function(){return W(void 0,void 0,void 0,function(){var e,n,t,r,i,o;return $(this,function(a){switch(a.label){case 0:if(0===f.length)return alert("손글씨를 먼저 작성해주세요."),[2];if(!(e=y.current))return alert("캔버스를 찾을 수 없습니다. 다시 시도해주세요."),[2];T("loading"),a.label=1;case 1:return a.trys.push([1,4,,5]),n=e.toDataURL("image/png"),t={image_base64:n,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2",challenge_id:N||""},[4,fetch("".concat("https://api.realcatcha.com","/api/handwriting-verify"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-API-Key":"rc_live_f49a055d62283fd02e8203ccaba70fc2"},body:JSON.stringify(t)})];case 2:if(!(r=a.sent()).ok)throw new Error("HTTP error! status: ".concat(r.status));return[4,r.json()];case 3:return(i=a.sent()).success?(T("success"),b.current.setVerificationResult(!0),o=i.redirect_url||document.referrer||window.location.origin,"undefined"!=typeof window&&window.location.assign(o)):(T("error"),b.current.setVerificationResult(!1),setTimeout(function(){O(),M(),T("idle")},1e3)),[3,5];case 4:return a.sent(),T("error"),setTimeout(function(){T("idle")},1e3),[3,5];case 5:return[2]}})})},disabled:0===f.length},{children:"VERIFY"}))]}))]}))};function ee(){var e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod|android|blackberry|windows phone/i.test(e)||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0?"mobile":"desktop"}var ne=null,te={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:{userAgent:navigator.userAgent,screenSize:{width:window.screen.width,height:window.screen.height},orientation:window.screen.height>window.screen.width?"portrait":"landscape"},touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}};function re(e){var n=e.touches[0];(ne={startTime:Date.now(),startPosition:{x:n.clientX,y:n.clientY},force:n.force||0,touchPoints:[{x:n.clientX,y:n.clientY,timestamp:Date.now(),force:n.force||0}],isMultiTouch:e.touches.length>1,touchCount:e.touches.length}).isMultiTouch&&te.touchPatterns.multiTouchCount++,te.touchPatterns.totalTouches++}function ie(e){if(ne){var n=e.touches[0];ne.touchPoints.push({x:n.clientX,y:n.clientY,timestamp:Date.now(),force:n.force||0})}}function oe(e){if(ne){var n=Date.now(),t=e.changedTouches[0];ne.endTime=n,ne.duration=n-ne.startTime,ne.endPosition={x:t.clientX,y:t.clientY};var r=ne.endPosition.x-ne.startPosition.x,i=ne.endPosition.y-ne.startPosition.y;ne.distance=Math.sqrt(r*r+i*i),ne.speed=ne.distance/ne.duration,te.touchEvents.push(ne),function(){var e=te.touchEvents;if(0===e.length)return;te.touchPatterns={averageDuration:e.reduce(function(e,n){return e+(n.duration||0)},0)/e.length,averageForce:e.reduce(function(e,n){return e+n.force},0)/e.length,averageDistance:e.reduce(function(e,n){return e+(n.distance||0)},0)/e.length,averageSpeed:e.reduce(function(e,n){return e+(n.speed||0)},0)/e.length,multiTouchCount:e.filter(function(e){return e.isMultiTouch}).length,totalTouches:e.length}}(),ne=null}}function ae(){try{var e=parseInt(localStorage.getItem("mobile_sequence")||"0")+1,n="mobile_behavior_".concat(e);te.endTime=Date.now(),localStorage.setItem(n,JSON.stringify(te)),localStorage.setItem("mobile_sequence",e.toString()),te={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:te.deviceInfo,touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}}}catch(e){}}var ce=function(){return ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ce.apply(this,arguments)},se=function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,c)}s((r=r.apply(e,n||[])).next())})},le=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};const ue=function(e){var n=e.siteKey,t=void 0===n?"":n,r=(e.theme,e.size,e.language,e.apiEndpoint),i=void 0===r?"https://api.realcatcha.com":r,o=e.onComplete,c=(0,a.useState)("initial"),s=c[0],u=c[1],d=(0,a.useState)(""),p=d[0],h=d[1],f=(0,a.useState)(0),g=(f[0],f[1],(0,a.useState)([])),m=g[0],v=g[1],x=(0,a.useState)(""),y=x[0],w=x[1],b=(0,a.useRef)(null),k=(0,a.useRef)(null),S=(0,a.useRef)(null),T=(0,a.useRef)({mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}});(0,a.useEffect)(function(){var e=ee();return function(){j=[],Object.keys(E).forEach(function(e){E[e]=0});for(var e=parseInt(localStorage.getItem("current_sequence")||"0"),n=1;n<=e;n++)localStorage.removeItem("behavior_data_".concat(n));localStorage.removeItem("current_sequence"),localStorage.removeItem("sequence_counters")}(),"desktop"===e?(window.addEventListener("mousemove",_),window.addEventListener("mousedown",P),window.addEventListener("mouseup",P),window.addEventListener("click",P),window.addEventListener("scroll",I)):(window.addEventListener("touchstart",re),window.addEventListener("touchmove",ie),window.addEventListener("touchend",oe)),function(){"desktop"===e?(window.removeEventListener("mousemove",_),window.removeEventListener("mousedown",P),window.removeEventListener("mouseup",P),window.removeEventListener("click",P),window.removeEventListener("scroll",I),A(!0)):(window.removeEventListener("touchstart",re),window.removeEventListener("touchmove",ie),window.removeEventListener("touchend",oe),ae()),k.current&&clearInterval(k.current)}},[]),(0,a.useEffect)(function(){"image-captcha"!==s&&"abstract-captcha"!==s&&"handwriting-captcha"!==s||(k.current&&(clearInterval(k.current),k.current=null),"desktop"===ee()?A(!0):ae())},[s]);var _=function(e){var n={x:e.clientX,y:e.clientY,timestamp:Date.now()};if(!S.current)return T.current.mouseMovements.push(n),void(S.current=n);var t=Math.sqrt(Math.pow(n.x-S.current.x,2)+Math.pow(n.y-S.current.y,2)),r=n.timestamp-S.current.timestamp;(t>=10||r>=50)&&(T.current.mouseMovements.push(n),S.current=n)},P=function(e){T.current.mouseClicks.push({x:e.clientX,y:e.clientY,timestamp:Date.now(),type:e.type})},I=function(){T.current.scrollEvents.push({position:window.scrollY,timestamp:Date.now()})},A=function(e){void 0===e&&(e=!1),C(ce(ce({},T.current),{pageEvents:ce(ce({},T.current.pageEvents),{exitTime:e?Date.now():void 0,totalTime:e?Date.now()-T.current.pageEvents.enterTime:void 0})})),e||(T.current=ce(ce({},T.current),{mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}}))},N=function(e){e.stopPropagation(),e.preventDefault(),"initial"===s?(u("loading"),setTimeout(function(){u("success"),setTimeout(function(){R()},1e3)},2e3)):"error"===s&&(u("initial"),h(""))},D=(0,a.useRef)(!1),R=function(){return se(void 0,void 0,void 0,function(){var e,n,r,a,c,s,l,d,p;return le(this,function(f){switch(f.label){case 0:if(f.trys.push([0,3,,4]),D.current)return[2];D.current=!0,e=i||"https://api.realcatcha.com",n="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),r=T.current,a={behavior_data:r,site_key:t};try{((null==r?void 0:r.mouseMovements)||[]).length,((null==r?void 0:r.mouseClicks)||[]).length,((null==r?void 0:r.scrollEvents)||[]).length,JSON.stringify(a).length,{mouseMovements:((null==r?void 0:r.mouseMovements)||[]).slice(0,2),mouseClicks:((null==r?void 0:r.mouseClicks)||[]).slice(0,2),scrollEvents:((null==r?void 0:r.scrollEvents)||[]).slice(0,2)}}catch(e){}return[4,fetch("".concat(e,"/api/next-captcha"),{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":t},body:JSON.stringify(a)})];case 1:if(!(c=f.sent()).ok)throw D.current=!1,new Error("HTTP error! status: ".concat(c.status));return[4,c.json()];case 2:s=f.sent(),l="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),d=Math.round(l-n);try{({status:c.status,durationMs:d,next_captcha:null==s?void 0:s.next_captcha,captcha_type:null==s?void 0:s.captcha_type,confidence_score:null==s?void 0:s.confidence_score,ml_service_used:null==s?void 0:s.ml_service_used,is_bot_detected:null==s?void 0:s.is_bot_detected})}catch(e){}return s.captcha_token&&w(s.captcha_token),"imagecaptcha"===s.next_captcha?u("image-captcha"):"handwritingcaptcha"===s.next_captcha?(v(Array.isArray(s.handwriting_samples)?s.handwriting_samples:[]),u("handwriting-captcha")):"abstractcaptcha"===s.next_captcha?u("abstract-captcha"):(u("success"),o&&(p={success:!0,captcha_token:s.captcha_token,captcha_type:s.captcha_type,confidence_score:s.confidence_score,is_bot_detected:s.is_bot_detected},o(p))),D.current=!1,[3,4];case 3:return f.sent(),u("error"),h("서버 연결에 실패했습니다. 다시 시도해주세요."),D.current=!1,[3,4];case 4:return[2]}})})},M=function(e){if(e&&y){if(u("success"),o){var n={success:!0,captcha_token:y,captcha_type:e.captcha_type||"unknown",confidence_score:e.confidence_score||1,is_bot_detected:!1};o(n)}}else R()};return(0,l.jsx)("div",ce({className:"captcha-container"},{children:"image-captcha"===s?(0,l.jsx)(z,{onSuccess:M,siteKey:t,apiEndpoint:i,captchaToken:y}):"abstract-captcha"===s?(0,l.jsx)(V,{onSuccess:M,siteKey:t,apiEndpoint:i,captchaToken:y}):"handwriting-captcha"===s?(0,l.jsx)(Z,{onSuccess:M,samples:m,siteKey:t,apiEndpoint:i,captchaToken:y}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",ce({className:"captcha-button ".concat(s),onClick:function(e){"initial"===s&&b.current&&!b.current.contains(e.target)&&(e.target.closest(".refresh-button")||(u("error"),h("잘못된 선택입니다. 다시 확인해주세요.")))}},{children:[(0,l.jsxs)("div",ce({className:"captcha-left"},{children:["initial"===s&&(0,l.jsx)("div",ce({className:"checkbox",ref:b,onClick:N},{children:(0,l.jsx)("div",{className:"checkbox-inner"})})),"loading"===s&&(0,l.jsxs)("div",ce({className:"loading-spinner"},{children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("span",ce({className:"loading-text"},{children:"LOADING..."}))]})),"success"===s&&(0,l.jsx)("div",ce({className:"success-check"},{children:(0,l.jsx)("svg",ce({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))})),"error"===s&&(0,l.jsx)("div",ce({className:"checkbox error",ref:b,onClick:N},{children:(0,l.jsx)("div",{className:"checkbox-inner error"})}))]})),(0,l.jsx)("div",ce({className:"captcha-center"},{children:(0,l.jsx)("span",ce({className:"captcha-text"},{children:"I'm not a robot"}))})),(0,l.jsx)("div",ce({className:"captcha-right"},{children:(0,l.jsx)("button",ce({className:"refresh-button",onClick:function(e){e.stopPropagation(),u("initial"),h("")}},{children:(0,l.jsx)("svg",ce({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))}))]})),"error"===s&&p&&(0,l.jsx)("div",ce({className:"error-message"},{children:p}))]})}))};var de=function(){return de=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},de.apply(this,arguments)},pe=function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,c)}s((r=r.apply(e,n||[])).next())})},he=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},fe=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t},ge=function(){function e(e){if(void 0===e&&(e={}),this.options=de({siteKey:"",theme:"light",size:"normal",language:"ko",apiEndpoint:"https://api.realcatcha.com",cdnEndpoint:"https://1df60f5faf3b4f2f992ced2edbae22ad.kakaoiedge.com"},e),!this.options.siteKey)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.")}return e.prototype.render=function(e,n){var t=this,r="string"==typeof e?document.getElementById(e):e;if(!r)throw new Error("Container with ID '".concat(e,"' not found"));var i=(0,s.H)(r),o=function(e){n&&"function"==typeof n&&n(e)};return i.render(c().createElement(ue,{onComplete:o,siteKey:this.options.siteKey,theme:this.options.theme,size:this.options.size,language:this.options.language,apiEndpoint:this.options.apiEndpoint,cdnEndpoint:this.options.cdnEndpoint})),{destroy:function(){i.unmount()},reset:function(){i.render(c().createElement(ue,{onComplete:o,siteKey:t.options.siteKey,theme:t.options.theme,size:t.options.size,language:t.options.language,apiEndpoint:t.options.apiEndpoint,cdnEndpoint:t.options.cdnEndpoint,key:Date.now()}))},verifyToken:function(e,n,r){return pe(t,void 0,void 0,function(){var t;return he(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch("".concat(this.options.apiEndpoint,"/api/verify-captcha"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_key:this.options.siteKey,secret_key:e,captcha_token:n,response:r})})];case 1:if(!(t=i.sent()).ok)throw new Error("HTTP error! status: ".concat(t.status));return[4,t.json()];case 2:return[2,i.sent()];case 3:throw i.sent();case 4:return[2]}})})}}},e.prototype.configure=function(e){this.options=de(de({},this.options),e)},e}();"undefined"!=typeof window&&function(){pe(this,void 0,void 0,function(){var e;return he(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,new Promise(function(e){var n=function(){window.React&&window.ReactDOM&&window.ReactDOM.createRoot?e():setTimeout(n,50)};n()})];case 1:return n.sent(),window.RealCaptcha=ge,window.createRealCaptcha=function(e){return new ge(e)},window.renderRealCaptcha=function(e,n,t){if(!n||!n.siteKey)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.");return new ge(n).render(e,t)},window.REAL={init:function(e){var n=e.container,t=e.siteKey,r=e.callback,i=e["expired-callback"],o=fe(e,["container","siteKey","callback","expired-callback"]);if(!t)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.");if(!n)throw new Error("container is required");var a=new ge(de({siteKey:t},o)).render(n,r);return i&&(a.onExpired=i),a},reset:function(){window.__REAL_CURRENT_INSTANCE__&&window.__REAL_CURRENT_INSTANCE__.reset()}},window.__REAL_PENDING_INIT__&&(e=window.__REAL_PENDING_INIT__,delete window.__REAL_PENDING_INIT__,window.REAL.init(e)),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}})})}();const me=ge;return o})());