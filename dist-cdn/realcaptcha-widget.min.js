!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],e):"object"==typeof exports?exports.RealCaptcha=e(require("react"),require("react-dom")):n.RealCaptcha=e(n.React,n.ReactDOM)}(this,(n,e)=>(()=>{"use strict";var t={20:(n,e,t)=>{var r=t(156),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(n,e,t){var r,o={},l=null,u=null;for(r in void 0!==t&&(l=""+t),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!s.hasOwnProperty(r)&&(o[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:n,key:l,ref:u,props:o,_owner:c.current}}e.Fragment=o,e.jsx=l,e.jsxs=l},54:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([n.id,"/* 오버레이 스타일 */\n.captcha-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  transition: all 0.3s ease;\n}\n\n.overlay-message {\n  color: white;\n  font-size: 16px;\n  font-weight: 500;\n  margin-top: 16px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n}\n\n/* 오버레이 로딩 스피너 */\n.overlay-loading-spinner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.overlay-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top: 3px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 성공 체크마크 */\n.overlay-success-check {\n  animation: fadeInScale 0.5s ease;\n  position: relative;\n  top: 5px;\n  transform: scale(1.4);\n}\n\n@keyframes fadeInScale {\n  0% { opacity: 0; transform: scale(0.5); }\n  100% { opacity: 1; transform: scale(1.4); }\n}\n\n/* 실패 X 아이콘 */\n.error-x {\n  animation: shake 0.5s ease;\n  transform: scale(1.4);\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-5px); }\n  75% { transform: translateX(5px); }\n}\n\n/* 반응형 디자인 */\n@media (max-width: 480px) {\n  .overlay-message {\n    font-size: 14px;\n    margin-top: 12px;\n  }\n  \n  .overlay-spinner {\n    width: 28px;\n    height: 28px;\n    border-width: 2.5px;\n  }\n  \n  .overlay-success-check,\n  .error-x {\n    transform: scale(1.2);\n  }\n  \n  @keyframes fadeInScale {\n    0% { opacity: 0; transform: scale(0.5); }\n    100% { opacity: 1; transform: scale(1.2); }\n  }\n}\n\n@media (max-width: 360px) {\n  .overlay-message {\n    font-size: 12px;\n    margin-top: 10px;\n  }\n  \n  .overlay-spinner {\n    width: 24px;\n    height: 24px;\n    border-width: 2px;\n  }\n  \n  .overlay-success-check,\n  .error-x {\n    transform: scale(1.1);\n  }\n  \n  @keyframes fadeInScale {\n    0% { opacity: 0; transform: scale(0.5); }\n    100% { opacity: 1; transform: scale(1.1); }\n  }\n} ",""]);const c=a},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var o={},a=[],c=0;c<n.length;c++){var s=n[c],l=r.base?s[0]+r.base:s[0],u=o[l]||0,d="".concat(l," ").concat(u);o[l]=u+1;var p=t(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=i(h,r);r.byIndex=c,e.splice(c,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function i(n,e){var t=e.domAPI(e);t.update(n);return function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,i){var o=r(n=n||[],i=i||{});return function(n){n=n||[];for(var a=0;a<o.length;a++){var c=t(o[a]);e[c].references--}for(var s=r(n,i),l=0;l<o.length;l++){var u=t(o[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=s}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},132:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([n.id,".captcha-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.captcha-button {\n  display: flex;\n  align-items: center;\n  width: 320px;\n  height: 60px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  padding: 0 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.captcha-button:hover {\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.captcha-left {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-right: 12px;\n}\n\n.checkbox {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ccc;\n  border-radius: 2px;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox.error {\n  border-color: #f44336;\n}\n\n.checkbox-inner {\n  width: 12px;\n  height: 12px;\n  background-color: transparent;\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n\n.checkbox-inner.error {\n  background-color: transparent;\n}\n\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #e0e0e0;\n  border-top: 2px solid #4285f4;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 10px;\n  color: #4285f4;\n  font-weight: 500;\n}\n\n.success-check {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.captcha-center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.captcha-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n}\n\n.captcha-right {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-left: 12px;\n}\n\n.refresh-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.refresh-button:hover {\n  background-color: #f5f5f5;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 12px;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 4px;\n}\n\n/* 상태별 스타일 */\n.captcha-button.loading {\n  background-color: #f8f9fa;\n}\n\n.captcha-button.success {\n  background-color: #f1f8e9;\n  border-color: #4caf50;\n}\n\n.captcha-button.error {\n  background-color: #ffebee;\n  border-color: #f44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .captcha-button {\n    max-width: 320px;\n    width: 100%;\n    min-width: 260px;\n    height: auto;\n    min-height: 55px;\n    aspect-ratio: 5.33;\n    padding: 0 12px;\n  }\n  \n  .captcha-text {\n    font-size: 13px;\n  }\n}\n\n@media (max-width: 480px) {\n  .captcha-button {\n    min-width: 240px;\n    min-height: 50px;\n    padding: 0 10px;\n  }\n  \n  .captcha-text {\n    font-size: 12px;\n  }\n  \n  .captcha-left,\n  .captcha-right {\n    width: 36px;\n    height: 36px;\n    margin-right: 8px;\n    margin-left: 8px;\n  }\n}\n\n@media (max-width: 360px) {\n  .captcha-button {\n    min-width: 220px;\n    min-height: 48px;\n  }\n  \n  .captcha-text {\n    font-size: 11px;\n  }\n} ",""]);const c=a},156:e=>{e.exports=n},299:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([n.id,".image-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-stage {\n  position: relative;\n  width: 100%;\n  /* 정사각 타일 그리드를 위해 비율을 1:1로 고정. 필요 시 natural ratio로 변경 가능 */\n  aspect-ratio: 1;\n  background-color: #e0e0e0;\n}\n\n.base-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n\n.overlay-grid {\n  position: absolute;\n  inset: 0;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n  gap: 0;\n  pointer-events: none; /* 셀에서 다시 활성화 */\n}\n\n.overlay-cell {\n  position: relative;\n  pointer-events: auto;\n  background-clip: padding-box;\n}\n\n/* 시각적 그리드 라인 */\n.overlay-grid {\n  outline: 2.5px solid #e0e0e0;\n}\n.overlay-cell {\n  box-shadow: inset 0 0 0 1.25px #e0e0e0;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.overlay-cell.selected {\n  background-color: rgba(33, 150, 243, 0.4);\n}\n\n.image-placeholder { display: none; }\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.image-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.image-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.image-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.image-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .image-captcha {\n    max-width: 400px;\n    width: 100%;\n    min-width: 300px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n}\n\n@media (max-width: 480px) {\n  .image-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .image-captcha {\n    min-width: 260px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,r,i,o){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<n.length;l++){var u=[].concat(n[l]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},318:n=>{n.exports=e},338:(n,e,t)=>{var r=t(318);e.H=r.createRoot,r.hydrateRoot},386:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([n.id,".warm-feeling-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: rgba(33, 150, 243, 0.4);\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.placeholder-content {\n  font-size: 24px;\n  color: #666;\n}\n\n.image-placeholder img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.warm-feeling-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.warm-feeling-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.warm-feeling-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.warm-feeling-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .warm-feeling-captcha {\n    max-width: 400px;\n    width: 100%;\n    min-width: 300px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n  \n  .image-grid {\n    gap: 2px;\n    padding: 2px;\n  }\n}\n\n@media (max-width: 480px) {\n  .warm-feeling-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .warm-feeling-captcha {\n    min-width: 260px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},569:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([n.id,".handwriting-captcha {\n  width: 500px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.images-container {\n  display: flex;\n  gap: 8px;\n  padding: 16px;\n  background-color: #ffffff;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.image-slot {\n  flex: 1;\n  aspect-ratio: 1;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-slot img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.handwriting-area {\n  padding: 16px;\n  background-color: #ffffff;\n}\n\n.grid-pattern {\n  width: 100%;\n  height: 200px;\n  background-image: \n    linear-gradient(rgba(200, 200, 200, 0.3) 1px, transparent 1px),\n    linear-gradient(90deg, rgba(200, 200, 200, 0.3) 1px, transparent 1px);\n  background-size: 20px 20px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  position: relative;\n}\n\n.drawing-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  background-color: transparent;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.control-button.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.control-button.disabled:hover {\n  background-color: transparent;\n}\n\n.verify-button {\n  background-color: #4285f4;\n  color: #ffffff;\n  border: 1px solid #4285f4;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button:hover {\n  background-color: #3367d6;\n}\n\n/* 상태별 테두리 */\n.handwriting-captcha {\n  position: relative;\n  transition: border 0.3s ease;\n}\n\n.handwriting-captcha.loading {\n  border: 3px solid #2196F3;\n}\n\n.handwriting-captcha.success {\n  border: 3px solid #4CAF50;\n}\n\n.handwriting-captcha.error {\n  border: 3px solid #F44336;\n}\n\n/* 반응형 디자인 */\n@media (max-width: 767px) {\n  .handwriting-captcha {\n    max-width: 500px;\n    width: 100%;\n    min-width: 380px;\n  }\n  \n  .captcha-header {\n    padding: 14px;\n  }\n  \n  .header-text {\n    font-size: 13px;\n  }\n  \n  .handwriting-area {\n    padding: 14px;\n  }\n  \n  .grid-pattern {\n    height: 180px;\n  }\n}\n\n@media (max-width: 480px) {\n  .handwriting-captcha {\n    min-width: 320px;\n  }\n  \n  .captcha-header {\n    padding: 12px;\n  }\n  \n  .header-text {\n    font-size: 12px;\n  }\n  \n  .handwriting-area {\n    padding: 12px;\n  }\n  \n  .grid-pattern {\n    height: 160px;\n  }\n  \n  .captcha-controls {\n    padding: 12px;\n  }\n  \n  .control-button {\n    padding: 10px;\n    min-width: 44px;\n    min-height: 44px;\n  }\n  \n  .verify-button {\n    padding: 10px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n}\n\n@media (max-width: 360px) {\n  .handwriting-captcha {\n    min-width: 280px;\n  }\n  \n  .captcha-header {\n    padding: 10px;\n  }\n  \n  .header-text {\n    font-size: 11px;\n  }\n  \n  .handwriting-area {\n    padding: 10px;\n  }\n  \n  .grid-pattern {\n    height: 140px;\n  }\n  \n  .captcha-controls {\n    padding: 10px;\n  }\n} ",""]);const c=a},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},848:(n,e,t)=>{n.exports=t(20)}},r={};function i(n){var e=r[n];if(void 0!==e)return e.exports;var o=r[n]={id:n,exports:{}};return t[n](o,o.exports,i),o.exports}i.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return i.d(e,{a:e}),e},i.d=(n,e)=>{for(var t in e)i.o(e,t)&&!i.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},i.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),i.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.nc=void 0;var o={};i.r(o),i.d(o,{RealCaptcha:()=>mn,default:()=>vn});var a=i(156),c=i.n(a),s=i(338),l=i(848),u=i(72),d=i.n(u),p=i(825),h=i.n(p),f=i(659),g=i.n(f),m=i(56),v=i.n(m),x=i(540),y=i.n(x),w=i(113),b=i.n(w),k=i(132),S={};S.styleTagTransform=b(),S.setAttributes=v(),S.insert=g().bind(null,"head"),S.domAPI=h(),S.insertStyleElement=y();d()(k.A,S);k.A&&k.A.locals&&k.A.locals;var T=i(299),j={};j.styleTagTransform=b(),j.setAttributes=v(),j.insert=g().bind(null,"head"),j.domAPI=h(),j.insertStyleElement=y();d()(T.A,j);T.A&&T.A.locals&&T.A.locals;var _=[],E={captcha:0,image:0,abstractFeeling:0,handwriting:0};function C(n){_.push(n),function(){try{var n=parseInt(localStorage.getItem("current_sequence")||"0")+1,e="behavior_data_".concat(n);localStorage.setItem(e,JSON.stringify(_)),localStorage.setItem("current_sequence",n.toString()),_=[]}catch(n){}}()}const I=function(){function n(){this.isTracking=!1,this.lastMousePosition=null,this.metrics={sessionId:"image_".concat(Date.now()),startTime:Date.now(),endTime:0,totalTime:0,imageInteractions:{},selectionOrder:[],deselectionOrder:[],finalSelection:[],mouseTrajectory:[],refreshCount:0,verifyAttempts:0,verificationSuccess:!1,attemptDuration:0};for(var n=0;n<9;n++)this.metrics.imageInteractions[n]={imageId:n,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}}return n.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},n.prototype.stopTracking=function(){this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage()},n.prototype.trackMouseMove=function(n,e){var t;if(this.isTracking){var r=Date.now(),i=null===(t=document.querySelector(".image-captcha"))||void 0===t?void 0:t.getBoundingClientRect();if(i){var o=i.width/2,a=i.height/2,c=Math.sqrt(Math.pow(n-o,2)+Math.pow(e-a,2)),s={x:n/i.width,y:e/i.height,distanceFromCenter:c,timestamp:r};this.metrics.mouseTrajectory.push(s),this.lastMousePosition=s}}},n.prototype.trackImageClick=function(n,e){if(this.isTracking){var t=this.metrics.imageInteractions[n];if(t){var r=e.target.getBoundingClientRect(),i=(e.clientX-r.left)/r.width,o=(e.clientY-r.top)/r.height,a={x:i,y:o,distanceFromCenter:Math.sqrt(Math.pow(i-.5,2)+Math.pow(o-.5,2)),timestamp:Date.now()};t.clicks.push(a),t.interactionDensity.clickCount++,this.updateInteractionDensity(t)}}},n.prototype.trackImageHover=function(n,e){if(this.isTracking){var t=this.metrics.imageInteractions[n];if(t){var r=Date.now();if(e)t.hovers.push({enter:r,leave:0}),t.interactionDensity.hoverCount++;else{var i=t.hovers[t.hovers.length-1];if(i&&0===i.leave){i.leave=r;var o=r-i.enter;t.totalHoverTime+=o,t.interactionDensity.totalHoverTime+=o}}this.updateInteractionDensity(t)}}},n.prototype.trackRefresh=function(){this.isTracking&&this.metrics.refreshCount++},n.prototype.trackVerifyAttempt=function(n){this.isTracking&&(this.metrics.verifyAttempts++,this.metrics.verificationSuccess=n,this.metrics.attemptDuration=Date.now()-this.metrics.startTime,this.metrics.finalSelection=Object.entries(this.metrics.imageInteractions).filter(function(n){n[0];return n[1].isSelected}).map(function(n){var e=n[0];return parseInt(e)}),this.saveToLocalStorage())},n.prototype.trackImageSelection=function(n,e){this.isTracking&&(this.metrics.imageInteractions[n]||(this.metrics.imageInteractions[n]={imageId:n,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}),e?(this.metrics.selectionOrder.push(n),this.metrics.imageInteractions[n].isSelected=!0):(this.metrics.deselectionOrder.push(n),this.metrics.imageInteractions[n].isSelected=!1))},n.prototype.updateInteractionDensity=function(n){var e=Date.now()-this.metrics.startTime;n.interactionDensity.averageDwellTime=n.interactionDensity.totalHoverTime/n.interactionDensity.hoverCount||0,n.interactionDensity.density=(n.interactionDensity.clickCount+n.interactionDensity.hoverCount)/(e||1)},n.prototype.saveToLocalStorage=function(){try{C(this.metrics)}catch(n){}},n.prototype.downloadMetrics=function(n){var e=JSON.stringify(this.metrics,null,2),t=new Blob([e],{type:"application/json"}),r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=n||"image_behavior_".concat(this.metrics.sessionId,".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)},n}();var P=i(54),A={};A.styleTagTransform=b(),A.setAttributes=v(),A.insert=g().bind(null,"head"),A.domAPI=h(),A.insertStyleElement=y();d()(P.A,A);P.A&&P.A.locals&&P.A.locals;var N=function(){return N=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},N.apply(this,arguments)};const D=function(n){var e=n.state,t=n.message;return(0,l.jsxs)("div",N({className:"captcha-overlay"},{children:[function(){switch(e){case"loading":return(0,l.jsx)("div",N({className:"overlay-loading-spinner"},{children:(0,l.jsx)("div",{className:"overlay-spinner"})}));case"success":return(0,l.jsx)("div",N({className:"overlay-success-check"},{children:(0,l.jsx)("svg",N({width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))}));case"error":return(0,l.jsx)("div",N({className:"error-x"},{children:(0,l.jsx)("svg",N({width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",fill:"#F44336"})}))}));default:return null}}(),("success"===e||"error"===e)&&(0,l.jsx)("div",N({className:"overlay-message"},{children:function(){if(t)return t;switch(e){case"loading":return"검증 중...";case"success":return"Success!";case"error":return"Failed";default:return""}}()}))]}))};var R=function(){return R=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},R.apply(this,arguments)},M=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,c)}s((r=r.apply(n,e||[])).next())})},L=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(n){c=[6,n],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},O=function(n,e,t){if(t||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))};const z=function(n){n.onSuccess;var e=(0,a.useState)([]),t=e[0],r=e[1],i=(0,a.useState)(!1),o=i[0],c=i[1],s=(0,a.useState)("idle"),u=s[0],d=s[1],p=(0,a.useState)(""),h=p[0],f=(p[1],(0,a.useState)(parseInt({NODE_ENV:"production",REACT_APP_TEST_MODE:"false",REACT_APP_API_BASE_URL:"https://api.realcatcha.com",REACT_APP_SUCCESS_REDIRECT_URL:""}.REACT_APP_CAPTCHA_TTL||"60"))),g=f[0],m=f[1],v=(0,a.useState)(""),x=v[0],y=v[1],w=(0,a.useState)(!1),b=(w[0],w[1]),k=(0,a.useState)(""),S=k[0],T=k[1],j=(0,a.useState)(""),_=j[0],E=j[1],C=(0,a.useRef)(new I),P=(0,a.useRef)(!1);(0,a.useEffect)(function(){return C.current.startTracking(),A(),function(){C.current.stopTracking()}},[]);var A=function(){return M(void 0,void 0,void 0,function(){var n,e;return L(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),b(!0),[4,fetch("".concat("https://api.realcatcha.com","/api/image-challenge"),{method:"POST"})];case 1:if(!(n=t.sent()).ok)throw new Error("HTTP ".concat(n.status));return[4,n.json()];case 2:return e=t.sent(),T(e.challenge_id||""),y(e.url||""),"number"==typeof e.ttl&&e.ttl>0&&m(e.ttl),E(e.question||""),r([]),c(!1),[3,5];case 3:return t.sent(),[3,5];case 4:return b(!1),[7];case 5:return[2]}})})};(0,a.useEffect)(function(){if(!(g<=0)){var n=setInterval(function(){return m(function(n){return n>0?n-1:0})},1e3);return function(){return clearInterval(n)}}},[g]),(0,a.useEffect)(function(){if(0!==g||o)g>0&&(P.current=!1);else{if(P.current)return;P.current=!0,N()}},[g,o]);var N=function(){r([]),c(!1),C.current.trackRefresh(),A()};return(0,l.jsxs)("div",R({className:"image-captcha ".concat(u),onMouseMove:function(n){var e=n.currentTarget.getBoundingClientRect(),t=n.clientX-e.left,r=n.clientY-e.top;C.current.trackMouseMove(t,r)}},{children:[("loading"===u||"success"===u||"error"===u)&&(0,l.jsx)(D,{state:u,message:h}),(0,l.jsx)("div",R({className:"captcha-header"},{children:(0,l.jsx)("span",R({className:"header-text"},{children:_||"Select all matching images."}))})),(0,l.jsxs)("div",R({className:"image-stage"},{children:[x&&(0,l.jsx)("img",{className:"base-image",src:x,alt:"captcha",draggable:!1}),(0,l.jsx)("div",R({className:"overlay-grid"},{children:[{id:1,selected:!1,gridPosition:{row:1,col:1}},{id:2,selected:!1,gridPosition:{row:1,col:2}},{id:3,selected:!1,gridPosition:{row:1,col:3}},{id:4,selected:!1,gridPosition:{row:2,col:1}},{id:5,selected:!1,gridPosition:{row:2,col:2}},{id:6,selected:!1,gridPosition:{row:2,col:3}},{id:7,selected:!1,gridPosition:{row:3,col:1}},{id:8,selected:!1,gridPosition:{row:3,col:2}},{id:9,selected:!1,gridPosition:{row:3,col:3}}].map(function(n){return(0,l.jsx)("div",R({className:"overlay-cell ".concat(t.includes(n.id)?"selected":""),onClick:function(e){return i=n.id,o=e.nativeEvent,a=t.includes(i),r(function(n){return a?n.filter(function(n){return n!==i}):O(O([],n,!0),[i],!1)}),void C.current.trackImageClick(i,o);var i,o,a},onMouseEnter:function(){return C.current.trackImageHover(n.id,!0)},onMouseLeave:function(){return C.current.trackImageHover(n.id,!1)}},{children:t.includes(n.id)&&(0,l.jsx)("div",R({className:"selection-overlay"},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))}),n.id)})}))]})),(0,l.jsxs)("div",R({className:"captcha-controls"},{children:[(0,l.jsx)("div",R({className:"control-left"},{children:(0,l.jsx)("button",R({className:"control-button",onClick:N},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))})),(0,l.jsx)("button",R({className:"verify-button ".concat(t.length>0&&S?"active":""),onClick:function(){return M(void 0,void 0,void 0,function(){var n,e,i;return L(this,function(o){switch(o.label){case 0:if(!S)return[2];d("loading"),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("".concat("https://api.realcatcha.com","/api/imagecaptcha-verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge_id:S,selections:t,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2"})})];case 2:if(!(n=o.sent()).ok)throw new Error("HTTP ".concat(n.status));return[4,n.json()];case 3:return e=o.sent(),i=!!e.success,C.current.trackVerifyAttempt(i),i?(d("success"),c(!0)):(d("error"),setTimeout(function(){d("idle"),r([]),N()},1e3)),[3,5];case 4:return o.sent(),d("error"),setTimeout(function(){d("idle")},1e3),[3,5];case 5:return[2]}})})},disabled:!(0!==t.length&&S)},{children:"VERIFY"}))]}))]}))};var H=i(386),F={};F.styleTagTransform=b(),F.setAttributes=v(),F.insert=g().bind(null,"head"),F.domAPI=h(),F.insertStyleElement=y();d()(H.A,F);H.A&&H.A.locals&&H.A.locals;var q=function(){return q=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},q.apply(this,arguments)},U=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,c)}s((r=r.apply(n,e||[])).next())})},B=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(n){c=[6,n],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},V=function(n,e,t){if(t||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))};const X=function(n){var e=n.onSuccess,t=(0,a.useState)([]),r=t[0],i=t[1],o=(0,a.useState)(!1),c=o[0],s=o[1],u=(0,a.useState)("idle"),d=u[0],p=u[1],h=(0,a.useState)(""),f=h[0],g=(h[1],(0,a.useState)(!1)),m=g[0],v=g[1],x=(0,a.useState)(""),y=x[0],w=x[1],b=(0,a.useState)(""),k=b[0],S=b[1],T=(0,a.useState)(""),j=T[0],_=T[1],E=(0,a.useState)(0),C=E[0],P=E[1],A=(0,a.useState)([]),N=A[0],R=A[1],M=(0,a.useRef)(new I),L=(0,a.useRef)(!1),O=!1,z="https://api.realcatcha.com";(0,a.useEffect)(function(){return M.current.startTracking(),H(),function(){M.current.stopTracking()}},[]),(0,a.useEffect)(function(){if(!(C<=0)){var n=setInterval(function(){return P(function(n){return n>0?n-1:0})},1e3);return function(){return clearInterval(n)}}},[C]),(0,a.useEffect)(function(){if(0!==C||c||m)C>0&&(L.current=!1);else{if(L.current)return;L.current=!0,w("시간이 만료되어 새로운 문제로 갱신합니다."),F()}},[C,c,m]);var H=function(){return U(void 0,void 0,void 0,function(){var n,e,t,r;return B(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),v(!0),w(""),i([]),s(!1),[4,fetch("".concat(z,"/api/abstract-captcha"),{method:"POST"})];case 1:if(!(n=o.sent()).ok)throw new Error("HTTP ".concat(n.status));return[4,n.json()];case 2:return e=o.sent(),S(e.challenge_id),_(e.question||"이미지를 선택하세요"),P(e.ttl||45),t=e.images||[],r=t.map(function(n){return{id:n.id,url:n.url.startsWith("http")?n.url:"".concat(z).concat(n.url)}}),R(r),[3,5];case 3:return o.sent(),w("문제를 불러오지 못했습니다. 다시 시도해주세요."),[3,5];case 4:return v(!1),[7];case 5:return[2]}})})},F=function(){i([]),s(!1),M.current.trackRefresh(),H()};return(0,l.jsxs)("div",q({className:"warm-feeling-captcha ".concat(d),onMouseMove:function(n){var e=n.currentTarget.getBoundingClientRect(),t=n.clientX-e.left,r=n.clientY-e.top;M.current.trackMouseMove(t,r)}},{children:[("loading"===d||"success"===d||"error"===d)&&(0,l.jsx)(D,{state:d,message:f}),(0,l.jsx)("div",q({className:"captcha-header"},{children:(0,l.jsx)("span",q({className:"header-text"},{children:j}))})),y&&(0,l.jsx)("div",q({style:{padding:8,color:"#c00",fontSize:12,textAlign:"center"}},{children:y})),(0,l.jsx)("div",q({className:"image-grid"},{children:N.map(function(n){return(0,l.jsxs)("div",q({className:"image-item ".concat(r.includes(n.id)?"selected":""),onClick:function(){return e=n.id,t=r.includes(e),i(function(n){return t?n.filter(function(n){return n!==e}):V(V([],n,!0),[e],!1)}),void M.current.trackImageSelection(e,!t);var e,t},onMouseEnter:function(){return M.current.trackImageHover(n.id,!0)},onMouseLeave:function(){return M.current.trackImageHover(n.id,!1)}},{children:[(0,l.jsx)("div",q({className:"image-placeholder"},{children:(0,l.jsx)("img",{src:n.url,alt:"Image ".concat(n.id)})})),r.includes(n.id)&&(0,l.jsx)("div",q({className:"selection-overlay"},{children:(0,l.jsx)("svg",q({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))]}),n.id)})})),(0,l.jsxs)("div",q({className:"captcha-controls"},{children:[(0,l.jsx)("div",q({className:"control-left"},{children:(0,l.jsx)("button",q({className:"control-button",onClick:F,disabled:m},{children:(0,l.jsx)("svg",q({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))})),(0,l.jsx)("button",q({className:"verify-button ".concat(r.length>0?"active":""),onClick:function(){return U(void 0,void 0,void 0,function(){var n,t,o,a;return B(this,function(c){switch(c.label){case 0:if(!k)return[2];O,p("loading"),c.label=1;case 1:return c.trys.push([1,4,5,6]),v(!0),n={challenge_id:k,selections:r,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2"},[4,fetch("".concat(z,"/api/abstract-verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})];case 2:if(!(t=c.sent()).ok)throw new Error("HTTP ".concat(t.status));return[4,t.json()];case 3:return o=c.sent(),a=!!o.success,M.current.trackVerifyAttempt(a),a?(p("success"),s(!0),null==e||e(),[2]):(p("error"),setTimeout(function(){i([]),H(),p("idle")},1e3),[3,6]);case 4:return c.sent(),p("error"),setTimeout(function(){p("idle")},1e3),[3,6];case 5:return v(!1),[7];case 6:return[2]}})})},disabled:0===r.length||m},{children:"VERIFY"}))]}))]}))};var K=i(569),J={};J.styleTagTransform=b(),J.setAttributes=v(),J.insert=g().bind(null,"head"),J.domAPI=h(),J.insertStyleElement=y();d()(K.A,J);K.A&&K.A.locals&&K.A.locals;const Y=function(){function n(){this.isTracking=!1,this.currentStroke=[],this.lastStrokeEnd=0,this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1}}return n.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},n.prototype.stopTracking=function(){this.isTracking&&(this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage())},n.prototype.startStroke=function(n,e){if(this.isTracking){var t=Date.now(),r={x:n,y:e,timestamp:t};this.currentStroke=[r],this.lastStrokeEnd>0&&this.metrics.strokeIntervals.push(t-this.lastStrokeEnd)}},n.prototype.addPoint=function(n,e){if(this.isTracking&&0!==this.currentStroke.length){var t={x:n,y:e,timestamp:Date.now()};this.currentStroke.push(t),this.updateMetrics()}},n.prototype.endStroke=function(){if(this.isTracking&&!(this.currentStroke.length<2)){this.metrics.strokeCount++,this.lastStrokeEnd=Date.now();var n=this.calculateStrokeLength(),e=this.currentStroke[this.currentStroke.length-1].timestamp-this.currentStroke[0].timestamp,t=this.calculateCurvature(),r=this.calculateJitter(),i=this.calculateDirectionChanges(),o=this.calculateHesitations();this.metrics.strokeLengths.push(n),this.metrics.strokeDurations.push(e),this.metrics.strokeCurvatures.push(t),this.metrics.strokeJitters.push(r),this.metrics.directionChanges.push(i),this.metrics.hesitationPoints.push(o);var a=n/e;this.metrics.speedVariations.push(a),this.updateAverages(),this.currentStroke=[]}},n.prototype.calculateStrokeLength=function(){for(var n=0,e=1;e<this.currentStroke.length;e++){var t=this.currentStroke[e].x-this.currentStroke[e-1].x,r=this.currentStroke[e].y-this.currentStroke[e-1].y;n+=Math.sqrt(t*t+r*r)}return n},n.prototype.calculateCurvature=function(){if(this.currentStroke.length<3)return 0;for(var n=0,e=1;e<this.currentStroke.length-1;e++){var t=this.currentStroke[e-1],r=this.currentStroke[e],i=this.currentStroke[e+1],o=Math.atan2(r.y-t.y,r.x-t.x),a=Math.atan2(i.y-r.y,i.x-r.x);n+=Math.abs(a-o)}return n/(this.currentStroke.length-2)},n.prototype.calculateJitter=function(){if(this.currentStroke.length<3)return 0;for(var n=0,e=1;e<this.currentStroke.length-1;e++){var t={x:(this.currentStroke[e-1].x+this.currentStroke[e+1].x)/2,y:(this.currentStroke[e-1].y+this.currentStroke[e+1].y)/2},r=this.currentStroke[e];n+=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return n/(this.currentStroke.length-2)},n.prototype.calculateDirectionChanges=function(){if(this.currentStroke.length<3)return 0;for(var n=0,e=Math.atan2(this.currentStroke[1].y-this.currentStroke[0].y,this.currentStroke[1].x-this.currentStroke[0].x),t=2;t<this.currentStroke.length;t++){var r=Math.atan2(this.currentStroke[t].y-this.currentStroke[t-1].y,this.currentStroke[t].x-this.currentStroke[t-1].x);Math.abs(r-e)>Math.PI/4&&n++,e=r}return n},n.prototype.calculateHesitations=function(){if(this.currentStroke.length<2)return 0;for(var n=0,e=1;e<this.currentStroke.length;e++){var t=this.currentStroke[e].timestamp-this.currentStroke[e-1].timestamp,r=this.currentStroke[e].x-this.currentStroke[e-1].x,i=this.currentStroke[e].y-this.currentStroke[e-1].y;Math.sqrt(r*r+i*i)/t<.1&&n++}return n},n.prototype.updateAverages=function(){var n=this.metrics.strokeLengths.reduce(function(n,e){return n+e},0),e=this.metrics.strokeDurations.reduce(function(n,e){return n+e},0);this.metrics.averageSpeed=n/e},n.prototype.updateMetrics=function(){if(this.currentStroke.length>=2){var n=this.currentStroke[this.currentStroke.length-1],e=this.currentStroke[this.currentStroke.length-2],t=n.timestamp-e.timestamp,r=n.x-e.x,i=n.y-e.y,o=Math.sqrt(r*r+i*i)/t;this.metrics.speedVariations.push(o)}},n.prototype.setVerificationResult=function(n){this.metrics.verificationSuccess=n,this.saveToLocalStorage()},n.prototype.saveToLocalStorage=function(){try{var n="handwriting_behavior_".concat(this.metrics.sessionId);localStorage.setItem(n,JSON.stringify(this.metrics))}catch(n){}},n.prototype.downloadMetrics=function(){var n=JSON.stringify(this.metrics,null,2),e=new Blob([n],{type:"application/json"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="handwriting_behavior_".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},n.prototype.reset=function(){this.currentStroke=[],this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1},this.lastStrokeEnd=0,this.isTracking=!0},n}();var G=function(){return G=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},G.apply(this,arguments)},W=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,c)}s((r=r.apply(n,e||[])).next())})},$=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(n){c=[6,n],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},Q=function(n,e,t){if(t||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))};const Z=function(n){n.onSuccess;var e=n.samples,t=(0,a.useState)(!1),r=t[0],i=t[1],o=(0,a.useState)(""),c=(o[0],o[1],(0,a.useState)("")),s=(c[0],c[1]),u=(0,a.useState)(!1),d=u[0],p=u[1],h=(0,a.useState)([]),f=h[0],g=h[1],m=(0,a.useState)([]),v=m[0],x=m[1],y=(0,a.useRef)(null),w=(0,a.useRef)(null),b=(0,a.useRef)(new Y),k=(0,a.useState)("idle"),S=k[0],T=k[1],j=(0,a.useState)(""),_=j[0],E=(j[1],(0,a.useState)(parseInt({NODE_ENV:"production",REACT_APP_TEST_MODE:"false",REACT_APP_API_BASE_URL:"https://api.realcatcha.com",REACT_APP_SUCCESS_REDIRECT_URL:""}.REACT_APP_CAPTCHA_TTL||"60"))),C=E[0],I=E[1],P=(0,a.useRef)(!1),A=(0,a.useState)(null),N=A[0],R=A[1];(0,a.useEffect)(function(){var n=(e||[]).slice(0,5).map(function(n,e){return{id:e+1,src:n,alt:"Sample ".concat(e+1)}});x(n)},[e]),(0,a.useEffect)(function(){var n=y.current;if(n){n.width=2*n.offsetWidth,n.height=2*n.offsetHeight,n.style.width="".concat(n.offsetWidth,"px"),n.style.height="".concat(n.offsetHeight,"px");var e=n.getContext("2d");if(e)return e.scale(2,2),e.lineCap="round",e.strokeStyle="#000000",e.lineWidth=2,w.current=e,b.current.startTracking(),function(){b.current.stopTracking()}}},[]);var M=function(){return W(void 0,void 0,void 0,function(){var n,e,t;return $(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,4,5]),p(!0),[4,fetch("".concat("https://api.realcatcha.com","/api/handwriting-challenge"),{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"rc_live_f49a055d62283fd02e8203ccaba70fc2"}})];case 1:if(!(n=r.sent()).ok)throw new Error("HTTP ".concat(n.status));return[4,n.json()];case 2:return e=r.sent(),t=(e.samples||[]).slice(0,5).map(function(n,e){return{id:e+1,src:n,alt:"Sample ".concat(e+1)}}),x(t),"number"==typeof e.ttl&&e.ttl>0&&I(e.ttl),R(e.challenge_id||null),[3,5];case 3:return r.sent(),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})};(0,a.useEffect)(function(){if(!(C<=0)){var n=setInterval(function(){return I(function(n){return n>0?n-1:0})},1e3);return function(){return clearInterval(n)}}},[C]),(0,a.useEffect)(function(){if(0===C){if(P.current)return;P.current=!0,O(),M()}else C>0&&(P.current=!1)},[C]),(0,a.useEffect)(function(){M()},[]);var L=function(){var n;i(!1),null===(n=w.current)||void 0===n||n.closePath(),b.current.endStroke()},O=function(){var n=y.current;if(n){var e=n.getContext("2d");e&&(e.clearRect(0,0,n.width,n.height),g([]),b.current.reset())}};return(0,l.jsxs)("div",G({className:"handwriting-captcha ".concat(S)},{children:[("loading"===S||"success"===S||"error"===S)&&(0,l.jsx)(D,{state:S,message:_}),(0,l.jsx)("div",G({className:"captcha-header"},{children:(0,l.jsx)("span",G({className:"header-text"},{children:"이미지를 보고 떠오르는 키워드를 손글씨로 작성하세요."}))})),(0,l.jsx)("div",G({className:"images-container"},{children:v.map(function(n){return(0,l.jsx)("div",G({className:"image-slot"},{children:(0,l.jsx)("img",{src:n.src,alt:n.alt})}),n.id)})})),(0,l.jsx)("div",G({className:"handwriting-area"},{children:(0,l.jsx)("div",G({className:"grid-pattern"},{children:(0,l.jsx)("canvas",{ref:y,className:"drawing-canvas",onMouseDown:function(n){var e,t;i(!0);var r=n.nativeEvent,o=r.offsetX,a=r.offsetY;null===(e=w.current)||void 0===e||e.beginPath(),null===(t=w.current)||void 0===t||t.moveTo(o,a),b.current.startStroke(o,a);var c=y.current;if(c&&w.current){var s=w.current.getImageData(0,0,c.width,c.height);g(function(n){return Q(Q([],n,!0),[s],!1)})}},onMouseMove:function(n){var e,t;if(r){var i=n.nativeEvent,o=i.offsetX,a=i.offsetY;null===(e=w.current)||void 0===e||e.lineTo(o,a),null===(t=w.current)||void 0===t||t.stroke(),b.current.addPoint(o,a)}},onMouseUp:L,onMouseLeave:L})}))})),(0,l.jsxs)("div",G({className:"captcha-controls"},{children:[(0,l.jsxs)("div",G({className:"control-left"},{children:[(0,l.jsx)("button",G({className:"control-button",onClick:function(){O(),s(""),M()},disabled:d},{children:(0,l.jsx)("svg",G({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",G({className:"control-button ".concat(0===f.length?"disabled":""),onClick:function(){if(0!==f.length){var n=y.current;if(n&&w.current){var e=f.slice(0,-1);if(g(e),w.current.clearRect(0,0,n.width,n.height),e.length>0){var t=e[e.length-1];w.current.putImageData(t,0,0)}}}},disabled:0===f.length},{children:(0,l.jsx)("svg",G({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",fill:0===f.length?"#ccc":"#666"})}))}))]})),(0,l.jsx)("button",G({className:"verify-button ".concat(f.length>0?"active":""),onClick:function(){return W(void 0,void 0,void 0,function(){var n,e,t,r,i,o;return $(this,function(a){switch(a.label){case 0:if(0===f.length)return alert("손글씨를 먼저 작성해주세요."),[2];if(!(n=y.current))return alert("캔버스를 찾을 수 없습니다. 다시 시도해주세요."),[2];T("loading"),a.label=1;case 1:return a.trys.push([1,4,,5]),e=n.toDataURL("image/png"),t={image_base64:e,user_id:null,api_key:"rc_live_f49a055d62283fd02e8203ccaba70fc2",challenge_id:N||""},[4,fetch("".concat("https://api.realcatcha.com","/api/handwriting-verify"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-API-Key":"rc_live_f49a055d62283fd02e8203ccaba70fc2"},body:JSON.stringify(t)})];case 2:if(!(r=a.sent()).ok)throw new Error("HTTP error! status: ".concat(r.status));return[4,r.json()];case 3:return(i=a.sent()).success?(T("success"),b.current.setVerificationResult(!0),o=i.redirect_url||document.referrer||window.location.origin,"undefined"!=typeof window&&window.location.assign(o)):(T("error"),b.current.setVerificationResult(!1),setTimeout(function(){O(),M(),T("idle")},1e3)),[3,5];case 4:return a.sent(),T("error"),setTimeout(function(){T("idle")},1e3),[3,5];case 5:return[2]}})})},disabled:0===f.length},{children:"VERIFY"}))]}))]}))};function nn(){var n=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod|android|blackberry|windows phone/i.test(n)||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0?"mobile":"desktop"}var en=null,tn={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:{userAgent:navigator.userAgent,screenSize:{width:window.screen.width,height:window.screen.height},orientation:window.screen.height>window.screen.width?"portrait":"landscape"},touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}};function rn(n){var e=n.touches[0];(en={startTime:Date.now(),startPosition:{x:e.clientX,y:e.clientY},force:e.force||0,touchPoints:[{x:e.clientX,y:e.clientY,timestamp:Date.now(),force:e.force||0}],isMultiTouch:n.touches.length>1,touchCount:n.touches.length}).isMultiTouch&&tn.touchPatterns.multiTouchCount++,tn.touchPatterns.totalTouches++}function on(n){if(en){var e=n.touches[0];en.touchPoints.push({x:e.clientX,y:e.clientY,timestamp:Date.now(),force:e.force||0})}}function an(n){if(en){var e=Date.now(),t=n.changedTouches[0];en.endTime=e,en.duration=e-en.startTime,en.endPosition={x:t.clientX,y:t.clientY};var r=en.endPosition.x-en.startPosition.x,i=en.endPosition.y-en.startPosition.y;en.distance=Math.sqrt(r*r+i*i),en.speed=en.distance/en.duration,tn.touchEvents.push(en),function(){var n=tn.touchEvents;if(0===n.length)return;tn.touchPatterns={averageDuration:n.reduce(function(n,e){return n+(e.duration||0)},0)/n.length,averageForce:n.reduce(function(n,e){return n+e.force},0)/n.length,averageDistance:n.reduce(function(n,e){return n+(e.distance||0)},0)/n.length,averageSpeed:n.reduce(function(n,e){return n+(e.speed||0)},0)/n.length,multiTouchCount:n.filter(function(n){return n.isMultiTouch}).length,totalTouches:n.length}}(),en=null}}function cn(){try{var n=parseInt(localStorage.getItem("mobile_sequence")||"0")+1,e="mobile_behavior_".concat(n);tn.endTime=Date.now(),localStorage.setItem(e,JSON.stringify(tn)),localStorage.setItem("mobile_sequence",n.toString()),tn={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:tn.deviceInfo,touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}}}catch(n){}}var sn=function(){return sn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},sn.apply(this,arguments)},ln=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,c)}s((r=r.apply(n,e||[])).next())})},un=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(n){c=[6,n],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};const dn=function(n){var e=n.siteKey,t=void 0===e?"":e,r=(n.theme,n.size,n.language,n.apiEndpoint),i=void 0===r?"https://api.realcatcha.com":r,o=(n.onComplete,(0,a.useState)("initial")),c=o[0],s=o[1],u=(0,a.useState)(""),d=u[0],p=u[1],h=(0,a.useState)(0),f=(h[0],h[1],(0,a.useState)([])),g=f[0],m=f[1],v=(0,a.useRef)(null),x=(0,a.useRef)(null),y=(0,a.useRef)(null),w=(0,a.useRef)({mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}});(0,a.useEffect)(function(){var n=nn();return function(){_=[],Object.keys(E).forEach(function(n){E[n]=0});for(var n=parseInt(localStorage.getItem("current_sequence")||"0"),e=1;e<=n;e++)localStorage.removeItem("behavior_data_".concat(e));localStorage.removeItem("current_sequence"),localStorage.removeItem("sequence_counters")}(),"desktop"===n?(window.addEventListener("mousemove",b),window.addEventListener("mousedown",k),window.addEventListener("mouseup",k),window.addEventListener("click",k),window.addEventListener("scroll",S)):(window.addEventListener("touchstart",rn),window.addEventListener("touchmove",on),window.addEventListener("touchend",an)),function(){"desktop"===n?(window.removeEventListener("mousemove",b),window.removeEventListener("mousedown",k),window.removeEventListener("mouseup",k),window.removeEventListener("click",k),window.removeEventListener("scroll",S),T(!0)):(window.removeEventListener("touchstart",rn),window.removeEventListener("touchmove",on),window.removeEventListener("touchend",an),cn()),x.current&&clearInterval(x.current)}},[]),(0,a.useEffect)(function(){"image-captcha"!==c&&"abstract-captcha"!==c&&"handwriting-captcha"!==c||(x.current&&(clearInterval(x.current),x.current=null),"desktop"===nn()?T(!0):cn())},[c]);var b=function(n){var e={x:n.clientX,y:n.clientY,timestamp:Date.now()};if(!y.current)return w.current.mouseMovements.push(e),void(y.current=e);var t=Math.sqrt(Math.pow(e.x-y.current.x,2)+Math.pow(e.y-y.current.y,2)),r=e.timestamp-y.current.timestamp;(t>=10||r>=50)&&(w.current.mouseMovements.push(e),y.current=e)},k=function(n){w.current.mouseClicks.push({x:n.clientX,y:n.clientY,timestamp:Date.now(),type:n.type})},S=function(){w.current.scrollEvents.push({position:window.scrollY,timestamp:Date.now()})},T=function(n){void 0===n&&(n=!1),C(sn(sn({},w.current),{pageEvents:sn(sn({},w.current.pageEvents),{exitTime:n?Date.now():void 0,totalTime:n?Date.now()-w.current.pageEvents.enterTime:void 0})})),n||(w.current=sn(sn({},w.current),{mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}}))},j=function(n){n.stopPropagation(),n.preventDefault(),"initial"===c?(s("loading"),setTimeout(function(){s("success"),setTimeout(function(){P()},1e3)},2e3)):"error"===c&&(s("initial"),p(""))},I=(0,a.useRef)(!1),P=function(){return ln(void 0,void 0,void 0,function(){var n,e,r,o,a,c,l,u;return un(this,function(d){switch(d.label){case 0:if(d.trys.push([0,3,,4]),I.current)return[2];I.current=!0,n=i||"https://api.realcatcha.com",e="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),r=w.current,o={behavior_data:r,site_key:t};try{((null==r?void 0:r.mouseMovements)||[]).length,((null==r?void 0:r.mouseClicks)||[]).length,((null==r?void 0:r.scrollEvents)||[]).length,JSON.stringify(o).length,{mouseMovements:((null==r?void 0:r.mouseMovements)||[]).slice(0,2),mouseClicks:((null==r?void 0:r.mouseClicks)||[]).slice(0,2),scrollEvents:((null==r?void 0:r.scrollEvents)||[]).slice(0,2)}}catch(n){}return[4,fetch("".concat(n,"/api/next-captcha"),{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":t},body:JSON.stringify(o)})];case 1:if(!(a=d.sent()).ok)throw I.current=!1,new Error("HTTP error! status: ".concat(a.status));return[4,a.json()];case 2:c=d.sent(),l="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),u=Math.round(l-e);try{({status:a.status,durationMs:u,next_captcha:null==c?void 0:c.next_captcha,captcha_type:null==c?void 0:c.captcha_type,confidence_score:null==c?void 0:c.confidence_score,ml_service_used:null==c?void 0:c.ml_service_used,is_bot_detected:null==c?void 0:c.is_bot_detected})}catch(n){}return"imagecaptcha"===c.next_captcha?s("image-captcha"):"handwritingcaptcha"===c.next_captcha?(m(Array.isArray(c.handwriting_samples)?c.handwriting_samples:[]),s("handwriting-captcha")):"abstractcaptcha"===c.next_captcha?s("abstract-captcha"):s("success"),I.current=!1,[3,4];case 3:return d.sent(),s("error"),p("서버 연결에 실패했습니다. 다시 시도해주세요."),I.current=!1,[3,4];case 4:return[2]}})})},A=function(){P()};return(0,l.jsx)("div",sn({className:"captcha-container"},{children:"image-captcha"===c?(0,l.jsx)(z,{onSuccess:A}):"abstract-captcha"===c?(0,l.jsx)(X,{onSuccess:A}):"handwriting-captcha"===c?(0,l.jsx)(Z,{onSuccess:A,samples:g}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",sn({className:"captcha-button ".concat(c),onClick:function(n){"initial"===c&&v.current&&!v.current.contains(n.target)&&(n.target.closest(".refresh-button")||(s("error"),p("잘못된 선택입니다. 다시 확인해주세요.")))}},{children:[(0,l.jsxs)("div",sn({className:"captcha-left"},{children:["initial"===c&&(0,l.jsx)("div",sn({className:"checkbox",ref:v,onClick:j},{children:(0,l.jsx)("div",{className:"checkbox-inner"})})),"loading"===c&&(0,l.jsxs)("div",sn({className:"loading-spinner"},{children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("span",sn({className:"loading-text"},{children:"LOADING..."}))]})),"success"===c&&(0,l.jsx)("div",sn({className:"success-check"},{children:(0,l.jsx)("svg",sn({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))})),"error"===c&&(0,l.jsx)("div",sn({className:"checkbox error",ref:v,onClick:j},{children:(0,l.jsx)("div",{className:"checkbox-inner error"})}))]})),(0,l.jsx)("div",sn({className:"captcha-center"},{children:(0,l.jsx)("span",sn({className:"captcha-text"},{children:"I'm not a robot"}))})),(0,l.jsx)("div",sn({className:"captcha-right"},{children:(0,l.jsx)("button",sn({className:"refresh-button",onClick:function(n){n.stopPropagation(),s("initial"),p("")}},{children:(0,l.jsx)("svg",sn({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))}))]})),"error"===c&&d&&(0,l.jsx)("div",sn({className:"error-message"},{children:d}))]})}))};var pn=function(){return pn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},pn.apply(this,arguments)},hn=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,c)}s((r=r.apply(n,e||[])).next())})},fn=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(n){c=[6,n],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},gn=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t},mn=function(){function n(n){if(void 0===n&&(n={}),this.options=pn({siteKey:"",theme:"light",size:"normal",language:"ko",apiEndpoint:"https://api.realcatcha.com"},n),!this.options.siteKey)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.")}return n.prototype.render=function(n,e){var t=this,r="string"==typeof n?document.getElementById(n):n;if(!r)throw new Error("Container with ID '".concat(n,"' not found"));var i=(0,s.H)(r),o=function(n){e&&"function"==typeof e&&e(n)};return i.render(c().createElement(dn,{onComplete:o,siteKey:this.options.siteKey,theme:this.options.theme,size:this.options.size,language:this.options.language,apiEndpoint:this.options.apiEndpoint})),{destroy:function(){i.unmount()},reset:function(){i.render(c().createElement(dn,{onComplete:o,siteKey:t.options.siteKey,theme:t.options.theme,size:t.options.size,language:t.options.language,apiEndpoint:t.options.apiEndpoint,key:Date.now()}))}}},n.prototype.configure=function(n){this.options=pn(pn({},this.options),n)},n}();"undefined"!=typeof window&&function(){hn(this,void 0,void 0,function(){var n;return fn(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,new Promise(function(n){var e=function(){window.React&&window.ReactDOM&&window.ReactDOM.createRoot?n():setTimeout(e,50)};e()})];case 1:return e.sent(),window.RealCaptcha=mn,window.createRealCaptcha=function(n){return new mn(n)},window.renderRealCaptcha=function(n,e,t){if(!e||!e.siteKey)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.");return new mn(e).render(n,t)},window.REAL={init:function(n){var e=n.container,t=n.siteKey,r=n.callback,i=n["expired-callback"],o=gn(n,["container","siteKey","callback","expired-callback"]);if(!t)throw new Error("siteKey가 필요합니다. 발급받은 key_id를 전달하세요.");if(!e)throw new Error("container is required");var a=new mn(pn({siteKey:t},o)).render(e,r);return i&&(a.onExpired=i),a},reset:function(){window.__REAL_CURRENT_INSTANCE__&&window.__REAL_CURRENT_INSTANCE__.reset()}},window.__REAL_PENDING_INIT__&&(n=window.__REAL_PENDING_INIT__,delete window.__REAL_PENDING_INIT__,window.REAL.init(n)),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})}();const vn=mn;return o})());